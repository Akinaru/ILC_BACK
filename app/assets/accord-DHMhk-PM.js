import{r as h,o as Ie,d as a,e as i,g as e,B as l,z as we,q as _,s as G,F as j,t as D,v as S,j as ge,h as x,i as w,N as Qe,k as Xe,c as Ye,A as T,f as ye,u as Ze,y as U,I as R,M as he,E as et,n as tt,x as de,C as be,L as nt}from"./index-WfzvT7mn.js";import{_ as ot}from"./ExportComp-BLkM4KL6.js";const st=["id"],lt={class:"modal modal-bottom sm:modal-middle",role:"dialog"},at={class:"modal-box"},it={class:"font-bold text-lg"},rt={class:"form-control w-full items-center justify-center"},ct=e("div",{class:"label"},[e("span",{class:"label-text"},"Isced")],-1),ut=e("option",{value:""},"Aucun isced",-1),dt=["value"],pt={class:"form-control w-full items-center justify-center"},mt=e("div",{class:"label"},[e("span",{class:"label-text"},"Composante")],-1),vt=e("option",{value:""},"Aucune composante",-1),_t=["value"],ft={class:"form-control w-full items-center justify-center"},yt=e("div",{class:"label"},[e("span",{class:"label-text"},"Université")],-1),ht=e("option",{value:""},"Aucune université",-1),bt=["value"],wt={class:"form-control w-full items-center justify-center"},gt=e("div",{class:"label"},[e("span",{class:"label-text"},"Type accord")],-1),xt=e("option",{value:""},"Aucun type d'accord",-1),kt=e("option",null,"Bilatéral",-1),Ct=e("option",null,"Erasmus",-1),At=[xt,kt,Ct],Ut={class:"form-control w-full items-center justify-center"},jt=e("div",{class:"label"},[e("span",{class:"label-text"},"Nombre de place")],-1),Vt={class:"form-control w-full items-center justify-center"},Dt=e("div",{class:"label"},[e("span",{class:"label-text"},"Lien (facultatif)")],-1),It={class:"form-control w-full items-center justify-center"},$t=e("div",{class:"label"},[e("span",{class:"label-text"},"Description (facultatif)")],-1),Nt={class:"modal-action"},St=["for"],Mt=["for"],Et={__name:"ModifAccordComp",props:{accord:Object,isceds:Array,composantes:Array,universites:Array,partnercountrys:Array},emits:["agreementUpdated"],setup(M,{emit:Y}){const z=Y,p=M,E=h([]),u=h({isced:"",compo:"",univ:"",typeaccord:"",nbplace:0,lien:null,description:null,newisced:{code:0,name:""},newcompo:{name:"",shortname:""},newuniv:{partnercountry:"",name:"",city:"",newpartnercountry:""}});function B(){var k,d,r;u.value.isced=((k=p.accord.isced)==null?void 0:k.isc_id)??"",u.value.compo=((d=p.accord.component)==null?void 0:d.comp_id)??"",u.value.univ=((r=p.accord.university)==null?void 0:r.univ_id)??"",u.value.typeaccord=p.accord.agree_typeaccord??"",u.value.nbplace=p.accord.agree_nbplace??0,u.value.lien=p.accord.agree_lien??"",u.value.description=p.accord.agree_description??""}async function I(k){const d={agree_typeaccord:u.value.typeaccord,agree_nbplace:u.value.nbplace};if(u.value.nbplace<=0){ge("error",{data:{error:"Le nombre de places doit être supérieur à zéro.",message:"Modification de l'accord annulée."}});return}u.value.lien!=null&&(d.agree_lien=u.value.lien),u.value.description!=null&&(d.agree_description=u.value.description),d.isc_id=u.value.isced,d.comp_id=u.value.compo,d.univ_id=u.value.univ,await x("PUT",!0,E,w.apiUrl+"api/agreement/"+p.accord.agree_id,d),z("agreementUpdated")}return Ie(B),(k,d)=>(a(),i(j,null,[e("input",{type:"checkbox",id:"my_modal_"+M.accord.agree_id,class:"modal-toggle"},null,8,st),e("div",lt,[e("div",at,[e("h3",it,"Modification de l'accord n° "+l(M.accord.agree_id),1),e("form",{onSubmit:d[7]||(d[7]=we(r=>I(M.accord.agree_id),["prevent"])),class:"w-full *:my-2"},[e("label",rt,[ct,_(e("select",{class:"select select-bordered w-full select-primary",id:"isced_select","onUpdate:modelValue":d[0]||(d[0]=r=>u.value.isced=r)},[ut,(a(!0),i(j,null,D(M.isceds,(r,m)=>(a(),i("option",{key:m,value:r.isc_id},"("+l(r.isc_code)+") "+l(r.isc_name),9,dt))),128))],512),[[G,u.value.isced]])]),e("label",pt,[mt,_(e("select",{class:"select select-bordered w-full select-primary",id:"compo_select","onUpdate:modelValue":d[1]||(d[1]=r=>u.value.compo=r)},[vt,(a(!0),i(j,null,D(M.composantes,(r,m)=>(a(),i("option",{key:m,value:r.comp_id},l(r.comp_name)+" ("+l(r.comp_shortname)+")",9,_t))),128))],512),[[G,u.value.compo]])]),e("label",ft,[yt,_(e("select",{class:"select select-bordered w-full select-primary",id:"univ_select","onUpdate:modelValue":d[2]||(d[2]=r=>u.value.univ=r)},[ht,(a(!0),i(j,null,D(M.universites,(r,m)=>(a(),i("option",{key:m,value:r.univ_id},l(r.univ_name)+" ("+l(r.univ_city)+" - "+l(r.partnercountry.parco_name)+")",9,bt))),128))],512),[[G,u.value.univ]])]),e("label",wt,[gt,_(e("select",{class:"select select-bordered w-full select-primary",id:"typeaccord_select","onUpdate:modelValue":d[3]||(d[3]=r=>u.value.typeaccord=r)},At,512),[[G,u.value.typeaccord]])]),e("label",Ut,[jt,_(e("input",{type:"number",class:"input input-bordered w-full","onUpdate:modelValue":d[4]||(d[4]=r=>u.value.nbplace=r)},null,512),[[S,u.value.nbplace]])]),e("label",Vt,[Dt,_(e("input",{type:"text",class:"input input-bordered w-full","onUpdate:modelValue":d[5]||(d[5]=r=>u.value.lien=r)},null,512),[[S,u.value.lien]])]),e("label",It,[$t,_(e("input",{type:"text",class:"input input-bordered w-full","onUpdate:modelValue":d[6]||(d[6]=r=>u.value.description=r)},null,512),[[S,u.value.description]])])],32),e("div",Nt,[e("label",{for:"my_modal_"+M.accord.agree_id,class:"btn"},"Annuler",8,St),e("label",{for:"my_modal_"+M.accord.agree_id,class:"btn btn-success",onClick:d[8]||(d[8]=r=>I(M.accord.agree_id))},"Enregistrer",8,Mt)])])])],64))}},Lt=e("svg",{fill:"#000000",width:"24px",height:"24px",viewBox:"0 0 24 24",id:"import-left","data-name":"Flat Line",xmlns:"http://www.w3.org/2000/svg",class:"icon flat-line"},[e("polyline",{id:"primary",points:"15 13 11 13 11 9",style:{fill:"none",stroke:"rgb(0, 0, 0)","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"}}),e("line",{id:"primary-2","data-name":"primary",x1:"21",y1:"3",x2:"11",y2:"13",style:{fill:"none",stroke:"rgb(0, 0, 0)","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"}}),e("path",{id:"primary-3","data-name":"primary",d:"M19,13.89V20a1,1,0,0,1-1,1H4a1,1,0,0,1-1-1V6A1,1,0,0,1,4,5h6.11",style:{fill:"none",stroke:"rgb(0, 0, 0)","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"}})],-1),Tt={__name:"ImportAccordComp",props:{texte:{type:String,default:"Importer des x en csv"}},setup(M){const Y=h(null),z=h([]),{emit:p}=Qe(),E=()=>{Y.value.click()},u=r=>Object.values(r).every(m=>!m||m.trim()===""),B=r=>new Promise((m,C)=>{const g=new FileReader;g.onload=$=>{const F=$.target.result;m(F)},g.onerror=$=>{C(new Error("Erreur de lecture du fichier"))},g.readAsArrayBuffer(r)}),I=r=>new TextDecoder("utf-8").decode(r),k=r=>{const m=r.split(`
`).map(C=>C.trim()).filter(C=>C.length>0);return m[0].split(";").map(C=>C.trim()),m.slice(1).map(C=>{const g=C.split(";").map($=>$.trim());return{Pays:g[0]||"",Universite:g[1]||"",Ville:g[2]||"",Composante:g[3]||"",Lien:g[4]||"",Description:g[5]||"",Isced:g[6]||"",Nombre_de_place:g[7]||"",Type_accord:g[8]||"",Departements:g[9]||""}})},d=async r=>{const m=r.target.files[0];if(m&&m.name.endsWith(".csv"))try{const C=await B(m),g=I(C),F=k(g).filter(N=>!u(N));let K="";z.value=F.map(N=>(!N.Pays||N.Pays.trim()===""?N.Pays=K:K=N.Pays,N)),p("csv-imported",z.value),Y.value.value=null,z.value=[]}catch(C){console.error("Erreur lors de la lecture du fichier :",C)}else console.error("Fichier non valide")};return(r,m)=>(a(),i("div",null,[e("button",{class:"btn btn-info hover:scale-105 transition-all hover:opacity-70",onClick:E},[Lt,e("p",null,l(M.texte),1)]),e("input",{type:"file",ref_key:"fileInput",ref:Y,onChange:d,accept:".csv",style:{display:"none"}},null,544)]))}},zt={key:0},Bt={class:"flex justify-between"},Ft=e("p",{class:"text-xl font-bold"},"Accord",-1),Pt={class:"flex *:mx-1"},qt=e("svg",{fill:"#000000",version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"20px",height:"20px",viewBox:"0 0 408.483 408.483","xml:space":"preserve"},[e("g",null,[e("g",null,[e("path",{d:`M87.748,388.784c0.461,11.01,9.521,19.699,20.539,19.699h191.911c11.018,0,20.078-8.689,20.539-19.699l13.705-289.316
                                    H74.043L87.748,388.784z M247.655,171.329c0-4.61,3.738-8.349,8.35-8.349h13.355c4.609,0,8.35,3.738,8.35,8.349v165.293
                                    c0,4.611-3.738,8.349-8.35,8.349h-13.355c-4.61,0-8.35-3.736-8.35-8.349V171.329z M189.216,171.329
                                    c0-4.61,3.738-8.349,8.349-8.349h13.355c4.609,0,8.349,3.738,8.349,8.349v165.293c0,4.611-3.737,8.349-8.349,8.349h-13.355
                                    c-4.61,0-8.349-3.736-8.349-8.349V171.329L189.216,171.329z M130.775,171.329c0-4.61,3.738-8.349,8.349-8.349h13.356
                                    c4.61,0,8.349,3.738,8.349,8.349v165.293c0,4.611-3.738,8.349-8.349,8.349h-13.356c-4.61,0-8.349-3.736-8.349-8.349V171.329z`}),e("path",{d:`M343.567,21.043h-88.535V4.305c0-2.377-1.927-4.305-4.305-4.305h-92.971c-2.377,0-4.304,1.928-4.304,4.305v16.737H64.916
                                    c-7.125,0-12.9,5.776-12.9,12.901V74.47h304.451V33.944C356.467,26.819,350.692,21.043,343.567,21.043z`})])])],-1),Ot={class:"m-5 my-20"},Gt={class:"m-5 flex justify-center items-center flex-col"},Ht=e("p",{class:"text-lg font-bold"},"Ajout accord",-1),Rt={class:"form-control w-full items-center justify-center"},Wt=e("div",{class:"label"},[e("span",{class:"label-text"},"Isced")],-1),Jt=e("option",{disabled:"",selected:""},"Selectionnez un isced",-1),Kt=e("option",{value:"addNew"}," + Créer un isced",-1),Qt=["value"],Xt={key:0,class:"form-control w-5/6 my-1"},Yt=e("div",{class:"label"},[e("span",{class:"label-text"},"Créer un Isced")],-1),Zt={class:"form-control w-full items-center justify-center"},en=e("div",{class:"label"},[e("span",{class:"label-text"},"Composante")],-1),tn=e("option",{disabled:"",selected:""},"Selectionnez une composante",-1),nn=e("option",{value:"addNew"}," + Créer une composante",-1),on=["value"],sn={key:0,class:"form-control w-5/6 my-1"},ln=e("div",{class:"label"},[e("span",{class:"label-text"},"Créer une composante")],-1),an={class:"form-control w-full items-center justify-center"},rn=e("div",{class:"label"},[e("span",{class:"label-text"},"Université")],-1),cn=e("option",{disabled:"",selected:""},"Selectionnez une université",-1),un=e("option",{value:"addNew"}," + Créer une université",-1),dn=["value"],pn={key:0},mn={key:0,class:"form-control w-5/6 my-1"},vn=e("div",{class:"label"},[e("span",{class:"label-text"},"Créer une université")],-1),_n={class:"my-1"},fn=e("option",{disabled:"",selected:""},"Selectionnez un pays",-1),yn=e("option",{value:"addNew"}," + Créer un pays",-1),hn=["value"],bn={class:"flex items-center justify-center"},wn={class:"form-control w-full items-center justify-center"},gn=e("div",{class:"label"},[e("span",{class:"label-text"},"Type accord")],-1),xn=e("option",{disabled:"",selected:""},"Selectionnez un type d'accord",-1),kn=e("option",null,"Bilatéral",-1),Cn=e("option",null,"Erasmus",-1),An=[xn,kn,Cn],Un={class:"form-control w-full items-center justify-center"},jn=e("div",{class:"label"},[e("span",{class:"label-text"},"Nombre de places")],-1),Vn={class:"form-control w-full items-center justify-center"},Dn=e("div",{class:"label"},[e("span",{class:"label-text"},"Lien (facultatif)")],-1),In={class:"form-control w-full items-center justify-center"},$n=e("div",{class:"label"},[e("span",{class:"label-text"},"Description (facultatif)")],-1),Nn=e("div",{class:"flex items-center justify-center"},[e("button",{class:"btn btn-primary hover:scale-105 transition-all hover:opacity-70",type:"submit"},"Ajouter l'accord")],-1),Sn=e("p",{class:"font-bold text-xl mb-5"},"Liste des accords:",-1),Mn={key:0,class:"bg-base-200 w-full drop-shadow-lg block"},En=e("p",{class:"bg-base-300 p-3 flex items-center justify-center font-bold text-lg"},"Filtres",-1),Ln={class:"p-1"},Tn={class:"flex flex-wrap"},zn=["id","value"],Bn=["for"],Fn=["for"],Pn={class:"p-1"},qn={class:"lg:block flex flex-wrap"},On={class:"flex flex-wrap"},Gn=["id","value"],Hn=["for"],Rn=["for"],Wn={class:"p-1"},Jn={class:"lg:block flex flex-wrap"},Kn=["id","value"],Qn=["for"],Xn={key:0},Yn={class:"w-full bg-base-300 p-2"},Zn={class:"flex"},eo=["data-tip"],to={class:"relative inline-block"},no={key:0,class:"absolute inset-0 flex items-center justify-center text-black text-2xl font-bold bg-white select-none"},oo={class:"font-bold"},so={class:"flex mt-3"},lo=["href"],ao={key:0},io={key:1},ro=e("p",null,"Les départements: ",-1),co={class:"flex items-center justify-start"},uo=["data-tip"],po={class:"font-bold"},mo=["onClick"],vo={key:0,class:"stroke-current shrink-0 h-5 w-5",fill:"currentColor",height:"24px",width:"24px",version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 488.85 488.85","xml:space":"preserve"},_o=e("g",null,[e("path",{d:`M244.425,98.725c-93.4,0-178.1,51.1-240.6,134.1c-5.1,6.8-5.1,16.3,0,23.1c62.5,83.1,147.2,134.2,240.6,134.2
                                                            s178.1-51.1,240.6-134.1c5.1-6.8,5.1-16.3,0-23.1C422.525,149.825,337.825,98.725,244.425,98.725z M251.125,347.025
                                                            c-62,3.9-113.2-47.2-109.3-109.3c3.2-51.2,44.7-92.7,95.9-95.9c62-3.9,113.2,47.2,109.3,109.3
                                                            C343.725,302.225,302.225,343.725,251.125,347.025z M248.025,299.625c-33.4,2.1-61-25.4-58.8-58.8c1.7-27.6,24.1-49.9,51.7-51.7
                                                            c33.4-2.1,61,25.4,58.8,58.8C297.925,275.625,275.525,297.925,248.025,299.625z`})],-1),fo=[_o],yo={key:1,class:"stroke-current shrink-0 h-5 w-5",fill:"currentColor",height:"24px",width:"24px",version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 488.85 488.85","xml:space":"preserve"},ho=e("g",null,[e("path",{d:`M244.425,98.725c-93.4,0-178.1,51.1-240.6,134.1c-5.1,6.8-5.1,16.3,0,23.1c62.5,83.1,147.2,134.2,240.6,134.2
                                                            s178.1-51.1,240.6-134.1c5.1-6.8,5.1-16.3,0-23.1C422.525,149.825,337.825,98.725,244.425,98.725z M251.125,347.025
                                                            c-62,3.9-113.2-47.2-109.3-109.3c3.2-51.2,44.7-92.7,95.9-95.9c62-3.9,113.2,47.2,109.3,109.3
                                                            C343.725,302.225,302.225,343.725,251.125,347.025z M248.025,299.625c-33.4,2.1-61-25.4-58.8-58.8c1.7-27.6,24.1-49.9,51.7-51.7
                                                            c33.4-2.1,61,25.4,58.8,58.8C297.925,275.625,275.525,297.925,248.025,299.625z`}),e("line",{x1:"100",y1:"100",x2:"400",y2:"400",style:{stroke:"currentColor","stroke-width":"40"}})],-1),bo=[ho],wo=["onClick"],go=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"stroke-current shrink-0 h-5 w-5",fill:"none",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),xo=[go],ko=["onClick"],Co={key:0},Ao=["onSubmit"],Uo=e("p",null,"Ajouter un département",-1),jo={class:"flex items-center justify-start *:m-1"},Vo=["id","onUpdate:modelValue"],Do=e("option",{disabled:"",selected:""},"Selectionnez un département",-1),Io=["value"],$o=e("div",{class:"flex items-center justify-center"},[e("button",{class:"btn btn-primary",type:"submit"},"Ajouter le département")],-1),No=["onClick"],So=e("button",{class:"btn btn-neutral"},"Annuler",-1),Mo=[So],Eo=["for"],Lo=e("svg",{class:"h-5 w-5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M20,16v4a2,2,0,0,1-2,2H4a2,2,0,0,1-2-2V6A2,2,0,0,1,4,4H8",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"}),e("polygon",{fill:"none",points:"12.5 15.8 22 6.2 17.8 2 8.3 11.5 8 16 12.5 15.8",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"})],-1),To=[Lo],zo=["onClick"],Bo=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"stroke-current shrink-0 h-5 w-5",fill:"none",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),Fo=[Bo],Po={key:1},qo=e("p",{class:"text-center py-20"},"Aucun accord trouvé.",-1),Oo=[qo],Go={id:"confirmModalDeleteAll",ref:"confirmModalDeleteAll",class:"modal"},Ho={class:"modal-box max-w-full w-150"},Ro=e("h3",{class:"text-lg font-bold"},"Confirmer la suppression ?",-1),Wo={class:"py-3"},Jo=e("p",null,"Confirmez vous la suppression de tous les accords ?",-1),Ko=e("p",null,"Cela entraînera la suppression de l'arbitrage actuel ainsi que de tous les vœux des étudiants.",-1),Qo={key:0},Xo={class:"modal-action"},Yo=["disabled"],Zo={id:"confirmModal",ref:"confirmModal",class:"modal"},es={class:"modal-box max-w-full w-150"},ts=e("h3",{class:"text-lg font-bold"},"Confirmer la suppression ?",-1),ns={class:"py-3"},os=e("p",null,"Confirmez vous la suppression de l'accord:",-1),ss={class:"select-none flex justify-between items-center w-full h-20 mt-3"},ls={class:"bg-base-300 flex items-center justify-center h-20 select-none w-full"},as=["data-tip"],is={class:"relative inline-block"},rs={key:0,class:"absolute inset-0 flex items-center justify-center text-black text-2xl font-bold bg-white select-none"},cs={class:"flex flex-col w-full"},us={class:"w-full select-none"},ds={class:"modal-action"},ps={id:"modalAjoutAccords",ref:"modalAjoutAccords",class:"modal"},ms={class:"modal-box max-w-full w-150"},vs=e("h3",{class:"text-lg font-bold"},"Import d'accord",-1),_s={class:"py-3"},fs=e("p",null,`Note : les problèmes d'accent, comme le symbole "�", pourraient venir du format du fichier CSV.`,-1),ys=e("p",null,[T('Assurez-vous de bien choisir le format "'),e("strong",null,"CSV UTF-8 (délimité par des virgules)"),T('".')],-1),hs=["onClick"],bs=["onUpdate:modelValue"],ws={class:"mr-2 flex items-center justify-center"},gs={class:"flex flex-col"},xs={class:"w-full select-none"},ks={class:"font-bold"},Us={__name:"accord",emits:["agreementUpdated"],setup(M,{emit:Y}){const z=Xe(),p=h([]),E=h([]),u=h([]),B=h([]),I=h([]),k=h([]),d=h([]),r=h([]),m=h({time:0,bool:!0,countdown:null}),C=h(!1),g=h([]),$=h([]),F=h([]),K=h([]),N=h([]),o=h({isced:"",compo:"",univ:"",typeaccord:"",nbplace:0,lien:null,description:null,newisced:{code:0,name:""},newcompo:{name:"",shortname:""},newuniv:{partnercountry:"",name:"",city:"",newpartnercountry:"",newpartnercountrycode:""}}),W=h({pays:!1,departments:!1,component:!1});function pe(s){W.value[s]=!W.value[s]}function $e(s){k.value=s,document.getElementById("confirmModal").showModal()}function Ne(){document.getElementById("confirmModalDeleteAll").showModal(),m.value.bool=!0,m.value.time=3,m.value.countdown=setInterval(()=>{m.value.time-=1,m.value.time<=0&&(clearInterval(m.value.countdown),m.value.bool=!1)},1e3)}function me(){document.getElementById("confirmModal").close(),document.getElementById("confirmModalDeleteAll").close(),clearInterval(m.value.countdown)}function xe(){const s=document.getElementById("modalAjoutAccords");d.value=[],s.close()}const Se=s=>{d.value=s.map(f=>({...f,add:f.add!==void 0?f.add:!0})),document.getElementById("modalAjoutAccords").showModal()};async function Me(){const s=d.value.filter(c=>c.add),n=F.value.reduce((c,v)=>(c[v.univ_name.trim().toLowerCase()]=v.univ_id,c),{}),f=g.value.reduce((c,v)=>(c[v.isc_code.trim().toLowerCase()]=c[v.isc_code.trim().toLowerCase()]||[],c[v.isc_code.trim().toLowerCase()].push(v),c),{}),V=$.value.components.reduce((c,v)=>(c[v.comp_shortname.trim().toLowerCase()]=v,c),{}),L=N.value.reduce((c,v)=>(c[v.parco_name.trim().toLowerCase()]=v.parco_id,c),{}),P=K.value.departments.reduce((c,v)=>(c[v.dept_shortname.trim().toLowerCase()]=v,c),{});function q(c,v){if(!c||!v)return!1;const Q=c.trim().toLowerCase().replace(/[^a-z0-9]/g,""),ee=v.trim().toLowerCase().replace(/[^a-z0-9]/g,"");return Q===ee}if(r.value={agreements:s.map(c=>{var t,y,A,O,X,le;const v=(c.Isced||"").split(" - "),Q=(t=v[0])==null?void 0:t.trim().toLowerCase(),ee=n[(y=c.Universite)==null?void 0:y.trim().toLowerCase()]||null,re=((O=(A=f[Q])==null?void 0:A[0])==null?void 0:O.isc_id)||null;let ne=null;const oe=Object.values(V).find(H=>{var J;return q((J=c.Composante)==null?void 0:J.trim().toLowerCase(),H.comp_shortname.trim().toLowerCase())});oe&&(ne=oe.comp_id);const se=L[(X=c.Pays)==null?void 0:X.trim().toLowerCase()]||null,ce=(c.Departements||"").split(" - ").map(H=>H.trim().toLowerCase()).map(H=>{const J=Object.values(P).find(ue=>q(H,ue.dept_shortname.trim().toLowerCase()));return J?{dept_id:J.dept_id}:{dept_id:null,dept_shortname:H}});return{agree_lien:c.Lien||null,agree_nbplace:parseInt(c.Nombre_de_place,10)||0,agree_typeaccord:c.Type_accord||null,agree_description:c.Description||null,isced:{isc_id:re,isc_code:Q,isc_name:((le=v[1])==null?void 0:le.trim())||null},university:{univ_id:ee,univ_name:c.Universite,univ_city:c.Ville,parco_id:se},component:{comp_id:ne||null,comp_shortname:c.Composante},partnercountry:{parco_id:se,parco_name:c.Pays},departments:ce}})},console.log(r.value),await x("POST",!0,p,w.apiUrl+"api/agreementexp",r.value),p.value.status===201){const c={act_description:"Importation de "+r.value.agreements.length+" accords.",acc_id:z.login,agree_id:1};await x("POST",!1,p,w.apiUrl+"api/action",c)}xe(),Z()}const Ee=()=>{d.value.forEach(s=>{s.add=!0})},Le=()=>{d.value.forEach(s=>{s.add=!1})};function Te(s){const n=N.value.find(f=>f.parco_name===s);return n?n.parco_code:"Code non disponible"}const ve=Ye(()=>E.value.agreements.filter(s=>{const n=u.value.length===0||s.departments.some(V=>u.value.includes(V.dept_shortname)),f=I.value.length===0||I.value.includes(s.partnercountry.parco_name);return n&&f}));async function ze(){const s={agree_typeaccord:o.value.typeaccord,agree_nbplace:o.value.nbplace};if(o.value.nbplace<=0){ge("error",{data:{error:"Le Nombre de placess doit être supérieur à zéro.",message:"Ajout de l'accord annulé."}});return}if(o.value.lien!=null&&(s.agree_lien=o.value.lien),o.value.description!=null&&(s.agree_description=o.value.description),o.value.isced!=="addNew"?s.isc_id=o.value.isced:s.newisced={isc_code:"0"+o.value.newisced.code.toString(),isc_name:o.value.newisced.name},o.value.compo!=="addNew"?s.comp_id=o.value.compo:s.newcompo={comp_name:o.value.newcompo.name,comp_shortname:o.value.newcompo.shortname.toUpperCase()},o.value.univ!=="addNew"?s.univ_id=o.value.univ:(s.newuniv={univ_name:o.value.newuniv.name,univ_city:o.value.newuniv.city},o.value.newuniv.partnercountry!=="addNew"?s.newuniv.parco_id=o.value.newuniv.partnercountry:(s.newuniv.parco_name=o.value.newuniv.newpartnercountry,s.newuniv.parco_code=o.value.newuniv.newpartnercountrycode)),s.typeaccord==="Selectionnez un type d'accord"){ge("error",{data:{error:"Vous devez choisir un type d'accord.",message:"Ajout de l'accord annulé."}});return}if(await x("POST",!0,p,w.apiUrl+"api/agreement",s),p.value.status===201){const n={act_description:"Ajout de l'accord avec "+p.value.agreement.university.univ_name+" ("+p.value.agreement.partnercountry.parco_name+").",acc_id:z.login,agree_id:p.value.agreement.agree_id};await x("POST",!1,p,w.apiUrl+"api/action",n)}await Z()}async function Z(){C.value=!1,await x("GET",!1,E,w.apiUrl+"api/agreement"),await x("GET",!1,g,w.apiUrl+"api/isced"),await x("GET",!1,$,w.apiUrl+"api/component"),await x("GET",!1,F,w.apiUrl+"api/university"),await x("GET",!1,K,w.apiUrl+"api/department"),await x("GET",!1,N,w.apiUrl+"api/partnercountry"),F.value.sort((s,n)=>{const f=s.partnercountry.parco_name.normalize("NFD").replace(/[\u0300-\u036f]/g,""),V=n.partnercountry.parco_name.normalize("NFD").replace(/[\u0300-\u036f]/g,""),L=f.localeCompare(V);if(L!==0)return L;const P=s.univ_name.normalize("NFD").replace(/[\u0300-\u036f]/g,""),q=n.univ_name.normalize("NFD").replace(/[\u0300-\u036f]/g,"");return P.localeCompare(q)}),C.value=!0,await tt(),te.value=Array(E.value.length).fill(!1),ie.value=Array(E.value.length).fill(""),Oe()}async function Be(s,n){await x("DELETE",!0,p,w.apiUrl+"api/departmentagreement/delete/"+s+"/"+n),await x("GET",!1,E,w.apiUrl+"api/agreement")}async function Fe(){if(await x("DELETE",!0,p,w.apiUrl+"api/agreement/deleteall"),p.value.status==202){const s={act_description:"Suppression de tous les accords",acc_id:z.login,agree_id:1};await x("POST",!1,p,w.apiUrl+"api/action",s)}Z()}async function Pe(s,n){if(me(),await x("DELETE",!0,p,w.apiUrl+"api/agreement/deletebyid/"+n),p.value.status==202){const f={act_description:"Suppression de l'accord avec "+s+".",acc_id:z.login,agree_id:n};await x("POST",!1,p,w.apiUrl+"api/action",f)}Z()}function qe(s){if(s.departments.length>0){const n=s.departments.map(f=>f.dept_id);return K.value.departments.filter(f=>!n.includes(f.dept_id)).sort((f,V)=>f.dept_shortname.localeCompare(V.dept_shortname))}else return K.value.departments.sort((n,f)=>n.dept_shortname.localeCompare(f.dept_shortname))}function Oe(){o.value.isced=document.querySelector("#isced_select").options[0].value,o.value.compo=document.querySelector("#compo_select").options[0].value,o.value.univ=document.querySelector("#univ_select").options[0].value,o.value.typeaccord=document.querySelector("#typeaccord_select").options[0].value,o.value.nbplace=0,o.value.newuniv.name="",o.value.newuniv.city="",o.value.newuniv.newpartnercountry="",o.value.newuniv.newpartnercountrycode="",o.value.description=null,o.value.lien=null}async function Ge(s,n,f,V){const L=f===0?1:0,P={dept_id:n,agree_id:s,deptagree_valide:L,dept_shortname:V};if(await x("PUT",!0,p,w.apiUrl+"api/departmentagreement/changevisibility",P),p.value.status==200){const c=E.value.agreements.find(v=>v.agree_id==s).departments.find(v=>v.dept_id==n);c.pivot.deptagree_valide=L}}const te=h([]),ie=h([]);async function ke(s){te.value[s]=!te.value[s]}async function He(s){var f,V,L,P,q,c;te.value[s]=!1;const n={agree_id:s,dept_id:ie.value[s],deptagree_valide:!0};if(await x("POST",!0,p,w.apiUrl+"api/departmentagreement",n),p.value.status==201){const v={act_description:`Ajout du département ${((f=p.value.department)==null?void 0:f.dept_shortname)||"Inconnu"} à l'accord ${((L=(V=p.value.agreement)==null?void 0:V.university)==null?void 0:L.univ_name)||"Inconnu"} (${((q=(P=p.value.agreement)==null?void 0:P.partnercountry)==null?void 0:q.parco_name)||"Inconnu"}).`,acc_id:z.login,agree_id:((c=p.value.agreement)==null?void 0:c.agree_id)||"Inconnu"};await x("POST",!1,p,w.apiUrl+"api/action",v)}await x("GET",!1,E,w.apiUrl+"api/agreement")}function Re(){u.value=[]}function We(){I.value=[]}function Je(){B.value=[]}return Ie(Z),(s,n)=>{var f,V,L,P,q,c,v,Q,ee,re,ne,oe,se,_e,ce;return a(),i("div",null,[C.value?(a(),i("div",zt,[e("div",Bt,[Ft,e("div",Pt,[e("button",{class:"btn btn-error",onClick:Ne},[qt,T(" Supprimer tous les accords ")]),ye(Tt,{texte:"Importer des accords en csv",onCsvImported:Se}),ye(ot,{texte:"Exporter des accords en csv",link:Ze(w).apiUrl+"api/agreement/export"},null,8,["link"])])]),e("div",Ot,[e("div",Gt,[Ht,e("form",{onSubmit:we(ze,["prevent"]),class:"w-2/5 *:my-2"},[e("label",Rt,[Wt,_(e("select",{class:"select select-bordered w-full select-primary",id:"isced_select","onUpdate:modelValue":n[0]||(n[0]=t=>o.value.isced=t)},[Jt,Kt,(a(!0),i(j,null,D(g.value,(t,y)=>(a(),i("option",{key:y,value:t.isc_id},"("+l(t.isc_code)+") "+l(t.isc_name),9,Qt))),128))],512),[[G,o.value.isced]]),o.value.isced==="addNew"?(a(),i("label",Xt,[Yt,_(e("input",{type:"number",placeholder:"Code (ex: 061)","onUpdate:modelValue":n[1]||(n[1]=t=>o.value.newisced.code=t),class:"input input-bordered w-full"},null,512),[[S,o.value.newisced.code]]),_(e("input",{type:"text",placeholder:"Nom (ex: Information and Communication Technologies)","onUpdate:modelValue":n[2]||(n[2]=t=>o.value.newisced.name=t),class:"input input-bordered w-full"},null,512),[[S,o.value.newisced.name]])])):U("",!0)]),e("label",Zt,[en,_(e("select",{class:"select select-bordered w-full select-primary",id:"compo_select","onUpdate:modelValue":n[3]||(n[3]=t=>o.value.compo=t)},[tn,nn,$.value&&$.value.components?(a(!0),i(j,{key:0},D($.value.components,(t,y)=>(a(),i("option",{key:y,value:t.comp_id},l(t.comp_name)+" ("+l(t.comp_shortname)+")",9,on))),128)):U("",!0)],512),[[G,o.value.compo]]),o.value.compo==="addNew"?(a(),i("label",sn,[ln,_(e("input",{type:"text",placeholder:"Nom (ex: IUT Annecy)","onUpdate:modelValue":n[4]||(n[4]=t=>o.value.newcompo.name=t),class:"input input-bordered w-full"},null,512),[[S,o.value.newcompo.name]]),_(e("input",{type:"text",placeholder:"Nom raccourci (ex: IUT-A)","onUpdate:modelValue":n[5]||(n[5]=t=>o.value.newcompo.shortname=t),class:"input input-bordered w-full"},null,512),[[S,o.value.newcompo.shortname]])])):U("",!0)]),e("label",an,[rn,_(e("select",{class:"select select-bordered w-full select-primary",id:"univ_select","onUpdate:modelValue":n[6]||(n[6]=t=>o.value.univ=t)},[cn,un,F.value&&F.value.length>0?(a(!0),i(j,{key:0},D(F.value,(t,y)=>(a(),i("option",{key:y,value:t.univ_id},[T("("),t.partnercountry&&t.partnercountry.parco_id?(a(),i("span",pn,l(t.partnercountry.parco_name),1)):U("",!0),T(") "+l(t.univ_name)+" à "+l(t.univ_city),1)],8,dn))),128)):U("",!0)],512),[[G,o.value.univ]]),o.value.univ==="addNew"?(a(),i("label",mn,[vn,e("span",_n,[_(e("input",{type:"text",placeholder:"Nom (ex: Université Savoie Mont Blanc)","onUpdate:modelValue":n[7]||(n[7]=t=>o.value.newuniv.name=t),class:"input input-bordered w-full"},null,512),[[S,o.value.newuniv.name]]),_(e("input",{type:"text",placeholder:"Ville (ex: Annecy)","onUpdate:modelValue":n[8]||(n[8]=t=>o.value.newuniv.city=t),class:"input input-bordered w-full"},null,512),[[S,o.value.newuniv.city]])]),_(e("select",{class:"select select-bordered w-full select-primary",id:"partnercountry_select","onUpdate:modelValue":n[9]||(n[9]=t=>o.value.newuniv.partnercountry=t)},[fn,yn,(a(!0),i(j,null,D(N.value,(t,y)=>(a(),i("option",{key:y,value:t.parco_id},l(t.parco_name),9,hn))),128))],512),[[G,o.value.newuniv.partnercountry]]),e("span",bn,[o.value.newuniv.partnercountry==="addNew"?_((a(),i("input",{key:0,type:"text",placeholder:"Nouveau pays (ex: France)","onUpdate:modelValue":n[10]||(n[10]=t=>o.value.newuniv.newpartnercountry=t),class:"input input-bordered w-5/6 my-1"},null,512)),[[S,o.value.newuniv.newpartnercountry]]):U("",!0),o.value.newuniv.partnercountry==="addNew"?_((a(),i("input",{key:1,type:"text",placeholder:"Code pays (ex: fr, de, it)","onUpdate:modelValue":n[11]||(n[11]=t=>o.value.newuniv.newpartnercountrycode=t),class:"input input-bordered w-5/6 my-1"},null,512)),[[S,o.value.newuniv.newpartnercountrycode]]):U("",!0)])])):U("",!0)]),e("label",wn,[gn,_(e("select",{class:"select select-bordered w-full select-primary",id:"typeaccord_select","onUpdate:modelValue":n[12]||(n[12]=t=>o.value.typeaccord=t)},An,512),[[G,o.value.typeaccord]])]),e("label",Un,[jn,_(e("input",{type:"number",class:"input input-bordered w-full","onUpdate:modelValue":n[13]||(n[13]=t=>o.value.nbplace=t)},null,512),[[S,o.value.nbplace]])]),e("label",Vn,[Dn,_(e("input",{type:"text",placeholder:"Lien vers le site correspondant à l'accord",class:"input input-bordered w-full","onUpdate:modelValue":n[14]||(n[14]=t=>o.value.lien=t)},null,512),[[S,o.value.lien]])]),e("label",In,[$n,_(e("input",{type:"text",placeholder:"Description de l'accord",class:"input input-bordered w-full","onUpdate:modelValue":n[15]||(n[15]=t=>o.value.description=t)},null,512),[[S,o.value.description]])]),Nn],32)])]),e("div",null,[Sn,E.value&&E.value.agreements?(a(),i("div",Mn,[En,e("p",null,l(ve.value.length)+" résultats ("+l(u.value.length+I.value.length+B.value.length)+" filtre"+l(I.value.length+u.value.length+B.value.length>1?"s":"")+")",1),e("div",null,[e("div",{class:"bg-base-300 p-2 mt-1 flex justify-between items-center hover:opacity-60 hover:cursor-pointer",onClick:n[16]||(n[16]=t=>pe("pays"))},[e("p",null,"Pays ("+l(I.value.length)+" séléctionné"+l(I.value.length>1?"s":"")+")",1),e("span",{class:R([W.value.pays?"rotate-180":"","transform transition-transform text-xl select-none"])},"▾",2)]),_(e("div",Ln,[e("button",{class:"hover:opacity-70 underline",onClick:We},"Tout désélectionner"),e("div",Tn,[(a(!0),i(j,null,D(N.value,(t,y)=>(a(),i("div",{key:y,class:"flex items-center hover:opacity-60 my-1 w-1/2 sm:w-1/3 lg:w-1/4 xl:w-1/5"},[_(e("input",{id:"filt_pays_"+y,type:"checkbox",class:"checkbox",value:t.parco_name,"onUpdate:modelValue":n[17]||(n[17]=A=>I.value=A)},null,8,zn),[[de,I.value]]),e("label",{for:"filt_pays_"+y,class:"flex w-full items-center cursor-pointer pl-2"},[e("span",{class:R(["fi mr-1","fi-"+t.parco_code])},null,2),e("label",{for:"filt_pays_"+y,class:"select-none w-full cursor-pointer"},l(t.parco_name),9,Fn)],8,Bn)]))),128))])],512),[[he,W.value.pays]])]),e("div",null,[e("div",{class:"bg-base-300 p-2 mt-1 flex justify-between items-center hover:opacity-60 hover:cursor-pointer",onClick:n[18]||(n[18]=t=>pe("departments"))},[e("p",null,"Départements ("+l(u.value.length)+" séléctionné"+l(u.value.length>1?"s":"")+")",1),e("span",{class:R([W.value.departments?"rotate-180":"","transform transition-transform text-xl select-none"])},"▾",2)]),_(e("div",Pn,[e("button",{class:"hover:opacity-70 underline",onClick:Re},"Tout désélectionner"),(a(!0),i(j,null,D($.value.components,(t,y)=>(a(),i("div",{key:y},[e("div",qn,[e("p",null,l(t.comp_name),1),e("div",On,[(a(!0),i(j,null,D(t.departments,(A,O)=>(a(),i("div",{key:O,class:"flex items-center hover:opacity-60 my-1"},[_(e("input",{id:"filt_dept_"+O,type:"checkbox",class:"checkbox",value:A.dept_shortname,"onUpdate:modelValue":n[19]||(n[19]=X=>u.value=X)},null,8,Gn),[[de,u.value]]),e("label",{for:"filt_dept_"+O,class:"w-full flex items-center justify-center cursor-pointer pl-2"},[e("div",{class:"w-6 h-3 mr-2",style:be({backgroundColor:A.dept_color})},null,4),e("label",{for:"filt_dept_"+O,class:"select-none w-full cursor-pointer"},l(A.dept_shortname),9,Rn)],8,Hn)]))),128))])])]))),128))],512),[[he,W.value.departments]])]),e("div",null,[e("div",{class:"bg-base-300 p-2 mt-1 flex justify-between items-center hover:opacity-60 hover:cursor-pointer",onClick:n[20]||(n[20]=t=>pe("component"))},[e("p",null,"Composante ("+l(B.value.length)+" séléctionné"+l(B.value.length>1?"s":"")+")",1),e("span",{class:R([W.value.component?"rotate-180":"","transform transition-transform text-xl select-none"])},"▾",2)]),_(e("div",Wn,[e("button",{class:"hover:opacity-70 underline",onClick:Je},"Tout désélectionner"),e("div",Jn,[(a(!0),i(j,null,D($.value.components,(t,y)=>(a(),i("div",{key:y,class:"flex items-center hover:opacity-60 my-1 w-fit"},[_(e("input",{id:"filt_compo_"+y,type:"checkbox",class:"checkbox",value:t.comp_name,"onUpdate:modelValue":n[21]||(n[21]=A=>B.value=A)},null,8,Kn),[[de,B.value]]),e("label",{for:"filt_compo_"+y,class:"select-none w-full cursor-pointer pl-2"},l(t.comp_name),9,Qn)]))),128))])],512),[[he,W.value.component]])])])):U("",!0),e("div",null,[ve.value.length>0?(a(),i("div",Xn,[(a(!0),i(j,null,D(ve.value,(t,y)=>{var A,O,X,le,H,J,ue,Ce,Ae;return a(),i("div",{key:y,class:"m-5 p-3 flex"},[e("div",Yn,[e("div",Zn,[e("span",{class:"tooltip mr-2","data-tip":((A=t.partnercountry)==null?void 0:A.parco_name)||"Introuvable"},[e("span",to,[e("span",{class:R(["fi text-5xl","fi-"+(((O=t.partnercountry)==null?void 0:O.parco_code)||"")])},null,2),(X=t.partnercountry)!=null&&X.parco_code?U("",!0):(a(),i("span",no," ? "))])],8,eo),e("div",null,[e("p",null,[e("span",oo,l(((le=t.university)==null?void 0:le.univ_name)||"Nom université non disponible"),1),T(" à "+l(((H=t.university)==null?void 0:H.univ_city)||"Ville non disponible")+" ("+l(((J=t.partnercountry)==null?void 0:J.parco_name)||"Pays non disponible")+") ",1),e("span",null,[e("span",null,"Nombre de places: "+l(t.agree_nbplace||"Non spécifié"),1),T(", "),e("span",null,"Type accord: "+l(t.agree_typeaccord||"Non spécifié"),1)])]),e("p",null," ["+l(((ue=t.isced)==null?void 0:ue.isc_code)||"Code ISCED non disponible")+" - "+l(((Ce=t.isced)==null?void 0:Ce.isc_name)||"Nom ISCED non disponible")+"] Composante: "+l(((Ae=t.component)==null?void 0:Ae.comp_name)||"Nom composante non disponible")+" N°: "+l(t.agree_id),1)])]),e("div",so,[t.agree_lien?(a(),i("a",{key:0,href:t.agree_lien,class:"hover:opacity-80 text-blue-700 hover:cursor-pointer hover:underline"}," Cliquez ici pour accéder au site de l'université ",8,lo)):U("",!0)]),e("div",null,[e("p",null,[T("Description: "),t.agree_description?(a(),i("span",ao,l(t.agree_description),1)):U("",!0),t.agree_description?U("",!0):(a(),i("span",io,"Aucune"))])]),ro,e("div",co,[(a(!0),i(j,null,D(t.departments,(b,fe)=>{var ae,Ue,je,Ve;return a(),i("div",{key:fe},[e("div",{class:R(["w-fit p-2 flex items-center justify-center mx-1 tooltip select-none font-bold",{"opacity-50":((ae=b.pivot)==null?void 0:ae.deptagree_valide)===0}]),"data-tip":(((Ue=b.pivot)==null?void 0:Ue.deptagree_valide)===0?"(INVISIBLE) ":"")+"Département "+(b.dept_name||"Nom département non disponible"),style:be({backgroundColor:b.dept_color||"#FFFFFF"})},[e("p",null,[T(l(b.dept_shortname||"Abréviation département non disponible")+" ",1),e("span",po,l(((je=b.pivot)==null?void 0:je.deptagree_valide)===0?" (Invisible)":""),1)]),e("button",{class:"hover:opacity-60 hover:cursor-pointer bg-base-300 flex items-center justify-center p-1 ml-2",onClick:Ke=>{var De;return Ge(t.agree_id,b.dept_id,(De=b.pivot)==null?void 0:De.deptagree_valide,b.dept_shortname)}},[((Ve=b.pivot)==null?void 0:Ve.deptagree_valide)===1?(a(),i("svg",vo,fo)):(a(),i("svg",yo,bo))],8,mo),e("button",{class:"hover:opacity-60 hover:cursor-pointer bg-base-300 flex items-center justify-center p-1 ml-2",onClick:Ke=>Be(t.agree_id,b.dept_id)},xo,8,wo)],14,uo)])}),128)),e("p",{class:"bg-base-200 p-4 hover:cursor-pointer hover:opacity-60 select-none mx-1",onClick:b=>ke(t.agree_id)},"Ajouter un département",8,ko)]),te.value[t.agree_id]?(a(),i("div",Co,[e("form",{onSubmit:we(b=>He(t.agree_id),["prevent"])},[Uo,e("div",jo,[_(e("select",{class:"select select-bordered w-full max-w-xs",id:"form_dept_select_"+t.agree_id,"onUpdate:modelValue":b=>ie.value[t.agree_id]=b},[Do,(a(!0),i(j,null,D(qe(t),(b,fe)=>{var ae;return a(),i("option",{key:fe,value:b.dept_id,style:be({color:b.dept_color+" !important"})}," ("+l(((ae=b.component)==null?void 0:ae.comp_name)||"Nom composante non disponible")+") "+l(b.dept_shortname||"Abréviation département non disponible"),13,Io)}),128))],8,Vo),[[G,ie.value[t.agree_id]]]),$o,e("div",{class:"flex items-center justify-center",onClick:b=>ke(t.agree_id)},Mo,8,No)])],40,Ao)])):U("",!0)]),e("label",{for:"my_modal_"+t.agree_id,class:"hover:opacity-60 hover:cursor-pointer bg-base-300 flex items-center justify-center p-5"},To,8,Eo),ye(Et,{onAgreementUpdated:Z,accord:t,isceds:g.value,composantes:$.value.components,universites:F.value,partnercountrys:N.value},null,8,["accord","isceds","composantes","universites","partnercountrys"]),e("button",{class:"hover:opacity-60 hover:cursor-pointer bg-base-300 flex items-center justify-center p-5",onClick:b=>$e(t)},Fo,8,zo)])}),128))])):(a(),i("div",Po,Oo))]),e("dialog",Go,[e("div",Ho,[Ro,e("div",Wo,[Jo,Ko,m.value.bool?(a(),i("p",Qo,"Veuillez patienter "+l(m.value.time)+" secondes avant de confirmer.",1)):U("",!0)]),e("div",Xo,[e("button",{class:"btn",onClick:me},"Annuler"),e("button",{class:"btn btn-error",onClick:n[22]||(n[22]=t=>Fe()),disabled:m.value.bool},"Confirmer",8,Yo)])])],512),e("dialog",Zo,[e("div",es,[ts,e("div",ns,[os,e("div",ss,[e("div",ls,[e("span",{class:"tooltip mr-2","data-tip":((f=k.value.partnercountry)==null?void 0:f.parco_name)||"Introuvable"},[e("span",is,[e("span",{class:R(["fi text-5xl","fi-"+(((V=k.value.partnercountry)==null?void 0:V.parco_code)||"")])},null,2),(L=k.value.partnercountry)!=null&&L.parco_code?U("",!0):(a(),i("span",rs," ? "))])],8,as),e("div",cs,[e("p",us,[e("strong",null,l(((q=(P=k.value)==null?void 0:P.university)==null?void 0:q.univ_name)||"Université indisponible"),1),T(" à "+l(((v=(c=k.value)==null?void 0:c.university)==null?void 0:v.univ_city)||"Ville indisponible")+" ("+l(((ee=(Q=k.value)==null?void 0:Q.partnercountry)==null?void 0:ee.parco_name)||"Pays indisponible")+")",1)]),e("p",null,"["+l(((ne=(re=k.value)==null?void 0:re.isced)==null?void 0:ne.isc_code)||"Code ISCED non disponible")+" - "+l(((se=(oe=k.value)==null?void 0:oe.isced)==null?void 0:se.isc_name)||"Nom ISCED non disponible")+"] Composante: "+l(((ce=(_e=k.value)==null?void 0:_e.component)==null?void 0:ce.comp_name)||"Indisponible"),1)])])])]),e("div",ds,[e("button",{class:"btn btn-error",onClick:me},"Annuler"),e("button",{class:"btn btn-success",onClick:n[23]||(n[23]=t=>{var y;return Pe(((y=k.value.university)==null?void 0:y.univ_name)||"Univeristé indisponible",k.value.agree_id)})},"Confirmer")])])],512),e("dialog",ps,[e("div",ms,[vs,e("div",_s,[fs,ys,e("p",null,[T("Nombre d'accord séléctionné à ajouter: "),e("strong",null,l(d.value.filter(t=>t.add).length),1)]),e("div",{class:"my-4"},[e("button",{class:"hover:opacity-70 underline",onClick:Ee},"Tout sélectionner"),e("button",{class:"hover:opacity-70 ml-2 underline",onClick:Le},"Tout désélectionner")]),e("div",null,[(a(!0),i(j,null,D(d.value,(t,y)=>(a(),i("div",{key:y,class:R([{"bg-base-200":!t.add,"bg-base-300":t.add},"flex select-none my-2 items-center cursor-pointer"]),onClick:A=>t.add=!t.add},[_(e("input",{type:"checkbox","onUpdate:modelValue":A=>t.add=A,class:"opacity-70 checkbox checkbox-sm m-2 hover:opacity-50 hover:scale-110 transition-all"},null,8,bs),[[de,t.add]]),e("span",ws,[e("span",{class:R(["fi xl:text-5xl text-xl transition-all duration-100 ease-in-out","fi-"+Te(t.Pays)])},null,2)]),e("div",gs,[e("p",xs,[T("("+l(t.Pays)+") ",1),e("span",ks,l(t.Ville?t.Ville:"Aucune ville")+" - "+l(t.Universite?t.Universite:"Aucune université"),1)]),e("p",null,"("+l(t.Isced?t.Isced:"Aucun ISCED")+") "+l(t.Composante?t.Composante:"Aucune composante")+" - "+l(t.Departements?t.Departements:"Aucun départements"),1)])],10,hs))),128))])]),e("div",{class:"modal-action"},[e("button",{class:"btn btn-error",onClick:xe},"Annuler"),e("button",{class:"btn btn-success",onClick:Me},"Confirmer")])])],512)])])):(a(),et(nt,{key:1}))])}}};export{Us as default};
