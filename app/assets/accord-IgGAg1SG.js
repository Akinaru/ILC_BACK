import{r as h,o as De,d as a,e as i,g as e,B as l,z as we,q as _,s as q,F as j,t as V,v as S,j as ge,h as x,i as w,N as Qe,k as Xe,c as Ye,A as L,f as ye,u as Ze,y as U,I as R,M as he,E as et,n as tt,x as de,C as be,L as nt}from"./index-B86mjc3y.js";import{_ as st}from"./ExportComp-ok2yJOO3.js";const ot=["id"],lt={class:"modal modal-bottom sm:modal-middle",role:"dialog"},at={class:"modal-box"},it={class:"font-bold text-lg"},rt={class:"form-control w-full items-center justify-center"},ct=e("div",{class:"label"},[e("span",{class:"label-text"},"Isced")],-1),ut=e("option",{value:""},"Aucun isced",-1),dt=["value"],pt={class:"form-control w-full items-center justify-center"},mt=e("div",{class:"label"},[e("span",{class:"label-text"},"Composante")],-1),vt=e("option",{value:""},"Aucune composante",-1),_t=["value"],ft={class:"form-control w-full items-center justify-center"},yt=e("div",{class:"label"},[e("span",{class:"label-text"},"Université")],-1),ht=e("option",{value:""},"Aucune université",-1),bt=["value"],wt={class:"form-control w-full items-center justify-center"},gt=e("div",{class:"label"},[e("span",{class:"label-text"},"Type accord")],-1),xt=e("option",{value:""},"Aucun type d'accord",-1),kt=e("option",null,"Bilatéral",-1),Ct=e("option",null,"Erasmus",-1),At=[xt,kt,Ct],Ut={class:"form-control w-full items-center justify-center"},jt=e("div",{class:"label"},[e("span",{class:"label-text"},"Nombre de place")],-1),Vt={class:"form-control w-full items-center justify-center"},It=e("div",{class:"label"},[e("span",{class:"label-text"},"Lien (facultatif)")],-1),Dt={class:"form-control w-full items-center justify-center"},$t=e("div",{class:"label"},[e("span",{class:"label-text"},"Description (facultatif)")],-1),St={class:"modal-action"},Mt=["for"],Et=["for"],Nt={__name:"ModifAccordComp",props:{accord:Object,isceds:Array,composantes:Array,universites:Array,partnercountrys:Array},emits:["agreementUpdated"],setup(M,{emit:Y}){const T=Y,p=M,E=h([]),u=h({isced:"",compo:"",univ:"",typeaccord:"",nbplace:0,lien:null,description:null,newisced:{code:0,name:""},newcompo:{name:"",shortname:""},newuniv:{partnercountry:"",name:"",city:"",newpartnercountry:""}});function z(){var k,d,r;u.value.isced=((k=p.accord.isced)==null?void 0:k.isc_id)??"",u.value.compo=((d=p.accord.component)==null?void 0:d.comp_id)??"",u.value.univ=((r=p.accord.university)==null?void 0:r.univ_id)??"",u.value.typeaccord=p.accord.agree_typeaccord??"",u.value.nbplace=p.accord.agree_nbplace??0,u.value.lien=p.accord.agree_lien??"",u.value.description=p.accord.agree_description??""}async function I(k){const d={agree_typeaccord:u.value.typeaccord,agree_nbplace:u.value.nbplace};if(u.value.nbplace<=0){ge("error",{data:{error:"Le nombre de places doit être supérieur à zéro.",message:"Modification de l'accord annulée."}});return}u.value.lien!=null&&(d.agree_lien=u.value.lien),u.value.description!=null&&(d.agree_description=u.value.description),d.isc_id=u.value.isced,d.comp_id=u.value.compo,d.univ_id=u.value.univ,await x("PUT",!0,E,w.apiUrl+"api/agreement/"+p.accord.agree_id,d),T("agreementUpdated")}return De(z),(k,d)=>(a(),i(j,null,[e("input",{type:"checkbox",id:"my_modal_"+M.accord.agree_id,class:"modal-toggle"},null,8,ot),e("div",lt,[e("div",at,[e("h3",it,"Modification de l'accord n° "+l(M.accord.agree_id),1),e("form",{onSubmit:d[7]||(d[7]=we(r=>I(M.accord.agree_id),["prevent"])),class:"w-full *:my-2"},[e("label",rt,[ct,_(e("select",{class:"select select-bordered w-full select-primary",id:"isced_select","onUpdate:modelValue":d[0]||(d[0]=r=>u.value.isced=r)},[ut,(a(!0),i(j,null,V(M.isceds,(r,m)=>(a(),i("option",{key:m,value:r.isc_id},"("+l(r.isc_code)+") "+l(r.isc_name),9,dt))),128))],512),[[q,u.value.isced]])]),e("label",pt,[mt,_(e("select",{class:"select select-bordered w-full select-primary",id:"compo_select","onUpdate:modelValue":d[1]||(d[1]=r=>u.value.compo=r)},[vt,(a(!0),i(j,null,V(M.composantes,(r,m)=>(a(),i("option",{key:m,value:r.comp_id},l(r.comp_name)+" ("+l(r.comp_shortname)+")",9,_t))),128))],512),[[q,u.value.compo]])]),e("label",ft,[yt,_(e("select",{class:"select select-bordered w-full select-primary",id:"univ_select","onUpdate:modelValue":d[2]||(d[2]=r=>u.value.univ=r)},[ht,(a(!0),i(j,null,V(M.universites,(r,m)=>(a(),i("option",{key:m,value:r.univ_id},l(r.univ_name)+" ("+l(r.univ_city)+" - "+l(r.partnercountry.parco_name)+")",9,bt))),128))],512),[[q,u.value.univ]])]),e("label",wt,[gt,_(e("select",{class:"select select-bordered w-full select-primary",id:"typeaccord_select","onUpdate:modelValue":d[3]||(d[3]=r=>u.value.typeaccord=r)},At,512),[[q,u.value.typeaccord]])]),e("label",Ut,[jt,_(e("input",{type:"number",class:"input input-bordered w-full","onUpdate:modelValue":d[4]||(d[4]=r=>u.value.nbplace=r)},null,512),[[S,u.value.nbplace]])]),e("label",Vt,[It,_(e("input",{type:"text",class:"input input-bordered w-full","onUpdate:modelValue":d[5]||(d[5]=r=>u.value.lien=r)},null,512),[[S,u.value.lien]])]),e("label",Dt,[$t,_(e("input",{type:"text",class:"input input-bordered w-full","onUpdate:modelValue":d[6]||(d[6]=r=>u.value.description=r)},null,512),[[S,u.value.description]])])],32),e("div",St,[e("label",{for:"my_modal_"+M.accord.agree_id,class:"btn"},"Annuler",8,Mt),e("label",{for:"my_modal_"+M.accord.agree_id,class:"btn btn-success",onClick:d[8]||(d[8]=r=>I(M.accord.agree_id))},"Enregistrer",8,Et)])])])],64))}},Lt=e("svg",{fill:"#000000",width:"24px",height:"24px",viewBox:"0 0 24 24",id:"import-left","data-name":"Flat Line",xmlns:"http://www.w3.org/2000/svg",class:"icon flat-line"},[e("polyline",{id:"primary",points:"15 13 11 13 11 9",style:{fill:"none",stroke:"rgb(0, 0, 0)","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"}}),e("line",{id:"primary-2","data-name":"primary",x1:"21",y1:"3",x2:"11",y2:"13",style:{fill:"none",stroke:"rgb(0, 0, 0)","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"}}),e("path",{id:"primary-3","data-name":"primary",d:"M19,13.89V20a1,1,0,0,1-1,1H4a1,1,0,0,1-1-1V6A1,1,0,0,1,4,5h6.11",style:{fill:"none",stroke:"rgb(0, 0, 0)","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"}})],-1),Tt={__name:"ImportAccordComp",props:{texte:{type:String,default:"Importer des x en csv"}},setup(M){const Y=h(null),T=h([]),{emit:p}=Qe(),E=()=>{Y.value.click()},u=r=>Object.values(r).every(m=>!m||m.trim()===""),z=r=>new Promise((m,C)=>{const g=new FileReader;g.onload=D=>{const B=D.target.result;m(B)},g.onerror=D=>{C(new Error("Erreur de lecture du fichier"))},g.readAsArrayBuffer(r)}),I=r=>new TextDecoder("utf-8").decode(r),k=r=>{const m=r.split(`
`).map(C=>C.trim()).filter(C=>C.length>0);return m[0].split(";").map(C=>C.trim()),m.slice(1).map(C=>{const g=C.split(";").map(D=>D.trim());return{Pays:g[0]||"",Universite:g[1]||"",Ville:g[2]||"",Composante:g[3]||"",Lien:g[4]||"",Description:g[5]||"",Isced:g[6]||"",Nombre_de_place:g[7]||"",Type_accord:g[8]||"",Departements:g[9]||""}})},d=async r=>{const m=r.target.files[0];if(m&&m.name.endsWith(".csv"))try{const C=await z(m),g=I(C),B=k(g).filter($=>!u($));let K="";T.value=B.map($=>(!$.Pays||$.Pays.trim()===""?$.Pays=K:K=$.Pays,$)),p("csv-imported",T.value),Y.value.value=null,T.value=[]}catch(C){console.error("Erreur lors de la lecture du fichier :",C)}else console.error("Fichier non valide")};return(r,m)=>(a(),i("div",null,[e("button",{class:"btn btn-info hover:scale-105 transition-all hover:opacity-70",onClick:E},[Lt,e("p",null,l(M.texte),1)]),e("input",{type:"file",ref_key:"fileInput",ref:Y,onChange:d,accept:".csv",style:{display:"none"}},null,544)]))}},zt={key:0},Bt={class:"flex justify-between"},Pt=e("p",{class:"text-xl font-bold"},"Accord",-1),Ft={class:"flex *:mx-1"},qt=e("svg",{fill:"#000000",version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"20px",height:"20px",viewBox:"0 0 408.483 408.483","xml:space":"preserve"},[e("g",null,[e("g",null,[e("path",{d:`M87.748,388.784c0.461,11.01,9.521,19.699,20.539,19.699h191.911c11.018,0,20.078-8.689,20.539-19.699l13.705-289.316
                                    H74.043L87.748,388.784z M247.655,171.329c0-4.61,3.738-8.349,8.35-8.349h13.355c4.609,0,8.35,3.738,8.35,8.349v165.293
                                    c0,4.611-3.738,8.349-8.35,8.349h-13.355c-4.61,0-8.35-3.736-8.35-8.349V171.329z M189.216,171.329
                                    c0-4.61,3.738-8.349,8.349-8.349h13.355c4.609,0,8.349,3.738,8.349,8.349v165.293c0,4.611-3.737,8.349-8.349,8.349h-13.355
                                    c-4.61,0-8.349-3.736-8.349-8.349V171.329L189.216,171.329z M130.775,171.329c0-4.61,3.738-8.349,8.349-8.349h13.356
                                    c4.61,0,8.349,3.738,8.349,8.349v165.293c0,4.611-3.738,8.349-8.349,8.349h-13.356c-4.61,0-8.349-3.736-8.349-8.349V171.329z`}),e("path",{d:`M343.567,21.043h-88.535V4.305c0-2.377-1.927-4.305-4.305-4.305h-92.971c-2.377,0-4.304,1.928-4.304,4.305v16.737H64.916
                                    c-7.125,0-12.9,5.776-12.9,12.901V74.47h304.451V33.944C356.467,26.819,350.692,21.043,343.567,21.043z`})])])],-1),Ot={class:"m-5 my-20"},Gt={class:"m-5 flex justify-center items-center flex-col"},Ht=e("p",{class:"text-lg font-bold"},"Ajout accord",-1),Rt={class:"form-control w-full items-center justify-center"},Wt=e("div",{class:"label"},[e("span",{class:"label-text"},"Isced")],-1),Jt=e("option",{disabled:"",selected:""},"Selectionnez un isced",-1),Kt=e("option",{value:"addNew"}," + Créer un isced",-1),Qt=["value"],Xt={key:0,class:"form-control w-5/6 my-1"},Yt=e("div",{class:"label"},[e("span",{class:"label-text"},"Créer un Isced")],-1),Zt={class:"form-control w-full items-center justify-center"},en=e("div",{class:"label"},[e("span",{class:"label-text"},"Composante")],-1),tn=e("option",{disabled:"",selected:""},"Selectionnez une composante",-1),nn=e("option",{value:"addNew"}," + Créer une composante",-1),sn=["value"],on={key:0,class:"form-control w-5/6 my-1"},ln=e("div",{class:"label"},[e("span",{class:"label-text"},"Créer une composante")],-1),an={class:"form-control w-full items-center justify-center"},rn=e("div",{class:"label"},[e("span",{class:"label-text"},"Université")],-1),cn=e("option",{disabled:"",selected:""},"Selectionnez une université",-1),un=e("option",{value:"addNew"}," + Créer une université",-1),dn=["value"],pn={key:0},mn={key:0,class:"form-control w-5/6 my-1"},vn=e("div",{class:"label"},[e("span",{class:"label-text"},"Créer une université")],-1),_n={class:"my-1"},fn=e("option",{disabled:"",selected:""},"Selectionnez un pays",-1),yn=e("option",{value:"addNew"}," + Créer un pays",-1),hn=["value"],bn={class:"flex items-center justify-center"},wn={class:"form-control w-full items-center justify-center"},gn=e("div",{class:"label"},[e("span",{class:"label-text"},"Type accord")],-1),xn=e("option",{disabled:"",selected:""},"Selectionnez un type d'accord",-1),kn=e("option",null,"Bilatéral",-1),Cn=e("option",null,"Erasmus",-1),An=[xn,kn,Cn],Un={class:"form-control w-full items-center justify-center"},jn=e("div",{class:"label"},[e("span",{class:"label-text"},"Nombre de places")],-1),Vn={class:"form-control w-full items-center justify-center"},In=e("div",{class:"label"},[e("span",{class:"label-text"},"Lien (facultatif)")],-1),Dn={class:"form-control w-full items-center justify-center"},$n=e("div",{class:"label"},[e("span",{class:"label-text"},"Description (facultatif)")],-1),Sn=e("div",{class:"flex items-center justify-center"},[e("button",{class:"btn btn-primary hover:scale-105 transition-all hover:opacity-70",type:"submit"},"Ajouter l'accord")],-1),Mn=e("p",{class:"font-bold text-xl mb-5"},"Liste des accords:",-1),En={key:0,class:"bg-base-200 w-full drop-shadow-lg block"},Nn=e("p",{class:"bg-base-300 p-3 flex items-center justify-center font-bold text-lg"},"Filtres",-1),Ln={class:"p-1"},Tn={class:"flex flex-wrap"},zn=["id","value"],Bn=["for"],Pn=["for"],Fn={class:"p-1"},qn={class:"lg:block flex flex-wrap"},On={class:"flex flex-wrap"},Gn=["id","value"],Hn=["for"],Rn=["for"],Wn={class:"p-1"},Jn={class:"lg:block flex flex-wrap"},Kn=["id","value"],Qn=["for"],Xn={key:0},Yn={class:"w-full bg-base-300 p-2"},Zn={class:"flex"},es=["data-tip"],ts={class:"relative inline-block"},ns={key:0,class:"absolute inset-0 flex items-center justify-center text-black text-2xl font-bold bg-white select-none"},ss={class:"font-bold"},os={class:"flex mt-3"},ls=["href"],as={key:0},is={key:1},rs=e("p",null,"Les départements: ",-1),cs={class:"flex items-center justify-start"},us=["data-tip"],ds={class:"font-bold"},ps=["onClick"],ms={key:0,class:"stroke-current shrink-0 h-5 w-5",fill:"currentColor",height:"24px",width:"24px",version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 488.85 488.85","xml:space":"preserve"},vs=e("g",null,[e("path",{d:`M244.425,98.725c-93.4,0-178.1,51.1-240.6,134.1c-5.1,6.8-5.1,16.3,0,23.1c62.5,83.1,147.2,134.2,240.6,134.2
                                                            s178.1-51.1,240.6-134.1c5.1-6.8,5.1-16.3,0-23.1C422.525,149.825,337.825,98.725,244.425,98.725z M251.125,347.025
                                                            c-62,3.9-113.2-47.2-109.3-109.3c3.2-51.2,44.7-92.7,95.9-95.9c62-3.9,113.2,47.2,109.3,109.3
                                                            C343.725,302.225,302.225,343.725,251.125,347.025z M248.025,299.625c-33.4,2.1-61-25.4-58.8-58.8c1.7-27.6,24.1-49.9,51.7-51.7
                                                            c33.4-2.1,61,25.4,58.8,58.8C297.925,275.625,275.525,297.925,248.025,299.625z`})],-1),_s=[vs],fs={key:1,class:"stroke-current shrink-0 h-5 w-5",fill:"currentColor",height:"24px",width:"24px",version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 488.85 488.85","xml:space":"preserve"},ys=e("g",null,[e("path",{d:`M244.425,98.725c-93.4,0-178.1,51.1-240.6,134.1c-5.1,6.8-5.1,16.3,0,23.1c62.5,83.1,147.2,134.2,240.6,134.2
                                                            s178.1-51.1,240.6-134.1c5.1-6.8,5.1-16.3,0-23.1C422.525,149.825,337.825,98.725,244.425,98.725z M251.125,347.025
                                                            c-62,3.9-113.2-47.2-109.3-109.3c3.2-51.2,44.7-92.7,95.9-95.9c62-3.9,113.2,47.2,109.3,109.3
                                                            C343.725,302.225,302.225,343.725,251.125,347.025z M248.025,299.625c-33.4,2.1-61-25.4-58.8-58.8c1.7-27.6,24.1-49.9,51.7-51.7
                                                            c33.4-2.1,61,25.4,58.8,58.8C297.925,275.625,275.525,297.925,248.025,299.625z`}),e("line",{x1:"100",y1:"100",x2:"400",y2:"400",style:{stroke:"currentColor","stroke-width":"40"}})],-1),hs=[ys],bs=["onClick"],ws=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"stroke-current shrink-0 h-5 w-5",fill:"none",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),gs=[ws],xs=["onClick"],ks={key:0},Cs=["onSubmit"],As=e("p",null,"Ajouter un département",-1),Us={class:"flex items-center justify-start *:m-1"},js=["id","onUpdate:modelValue"],Vs=e("option",{disabled:"",selected:""},"Selectionnez un département",-1),Is=["value"],Ds=e("div",{class:"flex items-center justify-center"},[e("button",{class:"btn btn-primary",type:"submit"},"Ajouter le département")],-1),$s=["onClick"],Ss=e("button",{class:"btn btn-neutral"},"Annuler",-1),Ms=[Ss],Es=["for"],Ns=e("svg",{class:"h-5 w-5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M20,16v4a2,2,0,0,1-2,2H4a2,2,0,0,1-2-2V6A2,2,0,0,1,4,4H8",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"}),e("polygon",{fill:"none",points:"12.5 15.8 22 6.2 17.8 2 8.3 11.5 8 16 12.5 15.8",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"})],-1),Ls=[Ns],Ts=["onClick"],zs=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"stroke-current shrink-0 h-5 w-5",fill:"none",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),Bs=[zs],Ps={key:1},Fs=e("p",{class:"text-center py-20"},"Aucun accord trouvé.",-1),qs=[Fs],Os={id:"confirmModalDeleteAll",ref:"confirmModalDeleteAll",class:"modal"},Gs={class:"modal-box max-w-full w-150"},Hs=e("h3",{class:"text-lg font-bold"},"Confirmer la suppression ?",-1),Rs={class:"py-3"},Ws=e("p",null,"Confirmez vous la suppression de tous les accords ?",-1),Js=e("p",null,"Cela entraînera la suppression de l'arbitrage actuel ainsi que de tous les vœux des étudiants.",-1),Ks={key:0},Qs={class:"modal-action"},Xs=["disabled"],Ys={id:"confirmModal",ref:"confirmModal",class:"modal"},Zs={class:"modal-box max-w-full w-150"},eo=e("h3",{class:"text-lg font-bold"},"Confirmer la suppression ?",-1),to={class:"py-3"},no=e("p",null,"Confirmez vous la suppression de l'accord:",-1),so={class:"select-none flex justify-between items-center w-full h-20 mt-3"},oo={class:"bg-base-300 flex items-center justify-center h-20 select-none w-full"},lo=["data-tip"],ao={class:"relative inline-block"},io={key:0,class:"absolute inset-0 flex items-center justify-center text-black text-2xl font-bold bg-white select-none"},ro={class:"flex flex-col w-full"},co={class:"w-full select-none"},uo={class:"modal-action"},po={id:"modalAjoutAccords",ref:"modalAjoutAccords",class:"modal"},mo={class:"modal-box max-w-full w-150"},vo=e("h3",{class:"text-lg font-bold"},"Import d'accord",-1),_o={class:"py-3"},fo=e("p",null,`Note : les problèmes d'accent, comme le symbole "�", pourraient venir du format du fichier CSV.`,-1),yo=e("p",null,[L('Assurez-vous de bien choisir le format "'),e("strong",null,"CSV UTF-8 (délimité par des virgules)"),L('".')],-1),ho=["onClick"],bo=["onUpdate:modelValue"],wo={class:"mr-2 flex items-center justify-center"},go={class:"flex flex-col"},xo={class:"w-full select-none"},ko={class:"font-bold"},Uo={__name:"accord",emits:["agreementUpdated"],setup(M,{emit:Y}){const T=Xe(),p=h([]),E=h([]),u=h([]),z=h([]),I=h([]),k=h([]),d=h([]),r=h([]),m=h({time:0,bool:!0,countdown:null}),C=h(!1),g=h([]),D=h([]),B=h([]),K=h([]),$=h([]),s=h({isced:"",compo:"",univ:"",typeaccord:"",nbplace:0,lien:null,description:null,newisced:{code:0,name:""},newcompo:{name:"",shortname:""},newuniv:{partnercountry:"",name:"",city:"",newpartnercountry:"",newpartnercountrycode:""}}),W=h({pays:!1,departments:!1,component:!1});function pe(o){W.value[o]=!W.value[o]}function $e(o){k.value=o,document.getElementById("confirmModal").showModal()}function Se(){document.getElementById("confirmModalDeleteAll").showModal(),m.value.bool=!0,m.value.time=3,m.value.countdown=setInterval(()=>{m.value.time-=1,m.value.time<=0&&(clearInterval(m.value.countdown),m.value.bool=!1)},1e3)}function me(){document.getElementById("confirmModal").close(),document.getElementById("confirmModalDeleteAll").close(),clearInterval(m.value.countdown)}function xe(){const o=document.getElementById("modalAjoutAccords");d.value=[],o.close()}const Me=o=>{d.value=o.map(y=>({...y,add:y.add!==void 0?y.add:!0})),document.getElementById("modalAjoutAccords").showModal()};async function Ee(){const o=d.value.filter(c=>c.add),n=B.value.reduce((c,v)=>(c[v.univ_name.trim().toLowerCase()]=v.univ_id,c),{}),y=g.value.reduce((c,v)=>(c[v.isc_code.trim().toLowerCase()]=c[v.isc_code.trim().toLowerCase()]||[],c[v.isc_code.trim().toLowerCase()].push(v),c),{}),N=D.value.components.reduce((c,v)=>(c[v.comp_shortname.trim().toLowerCase()]=v,c),{}),P=$.value.reduce((c,v)=>(c[v.parco_name.trim().toLowerCase()]=v.parco_id,c),{}),O=K.value.departments.reduce((c,v)=>(c[v.dept_shortname.trim().toLowerCase()]=v,c),{});function G(c,v){if(!c||!v)return!1;const Q=c.trim().toLowerCase().replace(/[^a-z0-9]/g,""),ee=v.trim().toLowerCase().replace(/[^a-z0-9]/g,"");return Q===ee}if(r.value={agreements:o.map(c=>{var t,f,A,F,X,le;const v=(c.Isced||"").split(" - "),Q=(t=v[0])==null?void 0:t.trim().toLowerCase(),ee=n[(f=c.Universite)==null?void 0:f.trim().toLowerCase()]||null,re=((F=(A=y[Q])==null?void 0:A[0])==null?void 0:F.isc_id)||null;let ne=null;const se=Object.values(N).find(H=>{var J;return G((J=c.Composante)==null?void 0:J.trim().toLowerCase(),H.comp_shortname.trim().toLowerCase())});se&&(ne=se.comp_id);const oe=P[(X=c.Pays)==null?void 0:X.trim().toLowerCase()]||null,ce=(c.Departements||"").split(" - ").map(H=>H.trim().toLowerCase()).map(H=>{const J=Object.values(O).find(ue=>G(H,ue.dept_shortname.trim().toLowerCase()));return J?{dept_id:J.dept_id}:{dept_id:null,dept_shortname:H}});return{agree_lien:c.Lien||null,agree_nbplace:parseInt(c.Nombre_de_place,10)||0,agree_typeaccord:c.Type_accord||null,agree_description:c.Description||null,isced:{isc_id:re,isc_code:Q,isc_name:((le=v[1])==null?void 0:le.trim())||null},university:{univ_id:ee,univ_name:c.Universite,univ_city:c.Ville,parco_id:oe},component:{comp_id:ne||null,comp_shortname:c.Composante},partnercountry:{parco_id:oe,parco_name:c.Pays},departments:ce}})},console.log(r.value),await x("POST",!0,p,w.apiUrl+"api/agreementexp",r.value),p.value.status===201){const c={act_description:"Importation de "+r.value.agreements.length+" accords.",acc_id:T.login,agree_id:1};await x("POST",!1,p,w.apiUrl+"api/action",c)}xe(),Z()}const Ne=()=>{d.value.forEach(o=>{o.add=!0})},Le=()=>{d.value.forEach(o=>{o.add=!1})};function Te(o){const n=$.value.find(y=>y.parco_name===o);return n?n.parco_code:"Code non disponible"}const ve=Ye(()=>E.value.agreements.filter(o=>{const n=u.value.length===0||o.departments.some(N=>u.value.includes(N.dept_shortname)),y=I.value.length===0||I.value.includes(o.partnercountry.parco_name);return n&&y}));async function ze(){const o={agree_typeaccord:s.value.typeaccord,agree_nbplace:s.value.nbplace};if(s.value.nbplace<=0){ge("error",{data:{error:"Le Nombre de placess doit être supérieur à zéro.",message:"Ajout de l'accord annulé."}});return}if(s.value.lien!=null&&(o.agree_lien=s.value.lien),s.value.description!=null&&(o.agree_description=s.value.description),s.value.isced!=="addNew"?o.isc_id=s.value.isced:o.newisced={isc_code:"0"+s.value.newisced.code.toString(),isc_name:s.value.newisced.name},s.value.compo!=="addNew"?o.comp_id=s.value.compo:o.newcompo={comp_name:s.value.newcompo.name,comp_shortname:s.value.newcompo.shortname.toUpperCase()},s.value.univ!=="addNew"?o.univ_id=s.value.univ:(o.newuniv={univ_name:s.value.newuniv.name,univ_city:s.value.newuniv.city},s.value.newuniv.partnercountry!=="addNew"?o.newuniv.parco_id=s.value.newuniv.partnercountry:(o.newuniv.parco_name=s.value.newuniv.newpartnercountry,o.newuniv.parco_code=s.value.newuniv.newpartnercountrycode)),o.typeaccord==="Selectionnez un type d'accord"){ge("error",{data:{error:"Vous devez choisir un type d'accord.",message:"Ajout de l'accord annulé."}});return}if(await x("POST",!0,p,w.apiUrl+"api/agreement",o),p.value.status===201){const n={act_description:"Ajout de l'accord avec "+p.value.agreement.university.univ_name+" ("+p.value.agreement.partnercountry.parco_name+").",acc_id:T.login,agree_id:p.value.agreement.agree_id};await x("POST",!1,p,w.apiUrl+"api/action",n)}await Z()}async function Z(){C.value=!1,await x("GET",!1,E,w.apiUrl+"api/agreement"),await x("GET",!1,g,w.apiUrl+"api/isced"),await x("GET",!1,D,w.apiUrl+"api/component"),await x("GET",!1,B,w.apiUrl+"api/university"),await x("GET",!1,K,w.apiUrl+"api/department"),await x("GET",!1,$,w.apiUrl+"api/partnercountry"),B.value.sort((o,n)=>o.partnercountry.parco_name<n.partnercountry.parco_name?-1:o.partnercountry.parco_name>n.partnercountry.parco_name?1:o.univ_name<n.univ_name?-1:o.univ_name>n.univ_name?1:0),C.value=!0,await tt(),te.value=Array(E.value.length).fill(!1),ie.value=Array(E.value.length).fill(""),Oe()}async function Be(o,n){await x("DELETE",!0,p,w.apiUrl+"api/departmentagreement/delete/"+o+"/"+n),await x("GET",!1,E,w.apiUrl+"api/agreement")}async function Pe(){if(await x("DELETE",!0,p,w.apiUrl+"api/agreement/deleteall"),p.value.status==202){const o={act_description:"Suppression de tous les accords",acc_id:T.login,agree_id:1};await x("POST",!1,p,w.apiUrl+"api/action",o)}Z()}async function Fe(o,n){if(me(),await x("DELETE",!0,p,w.apiUrl+"api/agreement/deletebyid/"+n),p.value.status==202){const y={act_description:"Suppression de l'accord avec "+o+".",acc_id:T.login,agree_id:n};await x("POST",!1,p,w.apiUrl+"api/action",y)}Z()}function qe(o){if(o.departments.length>0){const n=o.departments.map(y=>y.dept_id);return K.value.departments.filter(y=>!n.includes(y.dept_id)).sort((y,N)=>y.dept_shortname.localeCompare(N.dept_shortname))}else return K.value.departments.sort((n,y)=>n.dept_shortname.localeCompare(y.dept_shortname))}function Oe(){s.value.isced=document.querySelector("#isced_select").options[0].value,s.value.compo=document.querySelector("#compo_select").options[0].value,s.value.univ=document.querySelector("#univ_select").options[0].value,s.value.typeaccord=document.querySelector("#typeaccord_select").options[0].value,s.value.nbplace=0,s.value.newuniv.name="",s.value.newuniv.city="",s.value.newuniv.newpartnercountry="",s.value.newuniv.newpartnercountrycode="",s.value.description=null,s.value.lien=null}async function Ge(o,n,y,N){const P=y===0?1:0,O={dept_id:n,agree_id:o,deptagree_valide:P,dept_shortname:N};if(await x("PUT",!0,p,w.apiUrl+"api/departmentagreement/changevisibility",O),p.value.status==200){const c=E.value.agreements.find(v=>v.agree_id==o).departments.find(v=>v.dept_id==n);c.pivot.deptagree_valide=P}}const te=h([]),ie=h([]);async function ke(o){te.value[o]=!te.value[o]}async function He(o){var y,N,P,O,G,c;te.value[o]=!1;const n={agree_id:o,dept_id:ie.value[o],deptagree_valide:!0};if(await x("POST",!0,p,w.apiUrl+"api/departmentagreement",n),p.value.status==201){const v={act_description:`Ajout du département ${((y=p.value.department)==null?void 0:y.dept_shortname)||"Inconnu"} à l'accord ${((P=(N=p.value.agreement)==null?void 0:N.university)==null?void 0:P.univ_name)||"Inconnu"} (${((G=(O=p.value.agreement)==null?void 0:O.partnercountry)==null?void 0:G.parco_name)||"Inconnu"}).`,acc_id:T.login,agree_id:((c=p.value.agreement)==null?void 0:c.agree_id)||"Inconnu"};await x("POST",!1,p,w.apiUrl+"api/action",v)}await x("GET",!1,E,w.apiUrl+"api/agreement")}function Re(){u.value=[]}function We(){I.value=[]}function Je(){z.value=[]}return De(Z),(o,n)=>{var y,N,P,O,G,c,v,Q,ee,re,ne,se,oe,_e,ce;return a(),i("div",null,[C.value?(a(),i("div",zt,[e("div",Bt,[Pt,e("div",Ft,[e("button",{class:"btn btn-error",onClick:Se},[qt,L(" Supprimer tous les accords ")]),ye(Tt,{texte:"Importer des accords en csv",onCsvImported:Me}),ye(st,{texte:"Exporter des accords en csv",link:Ze(w).apiUrl+"api/agreement/export"},null,8,["link"])])]),e("div",Ot,[e("div",Gt,[Ht,e("form",{onSubmit:we(ze,["prevent"]),class:"w-2/5 *:my-2"},[e("label",Rt,[Wt,_(e("select",{class:"select select-bordered w-full select-primary",id:"isced_select","onUpdate:modelValue":n[0]||(n[0]=t=>s.value.isced=t)},[Jt,Kt,(a(!0),i(j,null,V(g.value,(t,f)=>(a(),i("option",{key:f,value:t.isc_id},"("+l(t.isc_code)+") "+l(t.isc_name),9,Qt))),128))],512),[[q,s.value.isced]]),s.value.isced==="addNew"?(a(),i("label",Xt,[Yt,_(e("input",{type:"number",placeholder:"Code (ex: 061)","onUpdate:modelValue":n[1]||(n[1]=t=>s.value.newisced.code=t),class:"input input-bordered w-full"},null,512),[[S,s.value.newisced.code]]),_(e("input",{type:"text",placeholder:"Nom (ex: Information and Communication Technologies)","onUpdate:modelValue":n[2]||(n[2]=t=>s.value.newisced.name=t),class:"input input-bordered w-full"},null,512),[[S,s.value.newisced.name]])])):U("",!0)]),e("label",Zt,[en,_(e("select",{class:"select select-bordered w-full select-primary",id:"compo_select","onUpdate:modelValue":n[3]||(n[3]=t=>s.value.compo=t)},[tn,nn,D.value&&D.value.components?(a(!0),i(j,{key:0},V(D.value.components,(t,f)=>(a(),i("option",{key:f,value:t.comp_id},l(t.comp_name)+" ("+l(t.comp_shortname)+")",9,sn))),128)):U("",!0)],512),[[q,s.value.compo]]),s.value.compo==="addNew"?(a(),i("label",on,[ln,_(e("input",{type:"text",placeholder:"Nom (ex: IUT Annecy)","onUpdate:modelValue":n[4]||(n[4]=t=>s.value.newcompo.name=t),class:"input input-bordered w-full"},null,512),[[S,s.value.newcompo.name]]),_(e("input",{type:"text",placeholder:"Nom raccourci (ex: IUT-A)","onUpdate:modelValue":n[5]||(n[5]=t=>s.value.newcompo.shortname=t),class:"input input-bordered w-full"},null,512),[[S,s.value.newcompo.shortname]])])):U("",!0)]),e("label",an,[rn,_(e("select",{class:"select select-bordered w-full select-primary",id:"univ_select","onUpdate:modelValue":n[6]||(n[6]=t=>s.value.univ=t)},[cn,un,B.value&&B.value.length>0?(a(!0),i(j,{key:0},V(B.value,(t,f)=>(a(),i("option",{key:f,value:t.univ_id},[L("("),t.partnercountry&&t.partnercountry.parco_id?(a(),i("span",pn,l(t.partnercountry.parco_name),1)):U("",!0),L(") "+l(t.univ_name)+" à "+l(t.univ_city),1)],8,dn))),128)):U("",!0)],512),[[q,s.value.univ]]),s.value.univ==="addNew"?(a(),i("label",mn,[vn,e("span",_n,[_(e("input",{type:"text",placeholder:"Nom (ex: Université Savoie Mont Blanc)","onUpdate:modelValue":n[7]||(n[7]=t=>s.value.newuniv.name=t),class:"input input-bordered w-full"},null,512),[[S,s.value.newuniv.name]]),_(e("input",{type:"text",placeholder:"Ville (ex: Annecy)","onUpdate:modelValue":n[8]||(n[8]=t=>s.value.newuniv.city=t),class:"input input-bordered w-full"},null,512),[[S,s.value.newuniv.city]])]),_(e("select",{class:"select select-bordered w-full select-primary",id:"partnercountry_select","onUpdate:modelValue":n[9]||(n[9]=t=>s.value.newuniv.partnercountry=t)},[fn,yn,(a(!0),i(j,null,V($.value,(t,f)=>(a(),i("option",{key:f,value:t.parco_id},l(t.parco_name),9,hn))),128))],512),[[q,s.value.newuniv.partnercountry]]),e("span",bn,[s.value.newuniv.partnercountry==="addNew"?_((a(),i("input",{key:0,type:"text",placeholder:"Nouveau pays (ex: France)","onUpdate:modelValue":n[10]||(n[10]=t=>s.value.newuniv.newpartnercountry=t),class:"input input-bordered w-5/6 my-1"},null,512)),[[S,s.value.newuniv.newpartnercountry]]):U("",!0),s.value.newuniv.partnercountry==="addNew"?_((a(),i("input",{key:1,type:"text",placeholder:"Code pays (ex: fr, de, it)","onUpdate:modelValue":n[11]||(n[11]=t=>s.value.newuniv.newpartnercountrycode=t),class:"input input-bordered w-5/6 my-1"},null,512)),[[S,s.value.newuniv.newpartnercountrycode]]):U("",!0)])])):U("",!0)]),e("label",wn,[gn,_(e("select",{class:"select select-bordered w-full select-primary",id:"typeaccord_select","onUpdate:modelValue":n[12]||(n[12]=t=>s.value.typeaccord=t)},An,512),[[q,s.value.typeaccord]])]),e("label",Un,[jn,_(e("input",{type:"number",class:"input input-bordered w-full","onUpdate:modelValue":n[13]||(n[13]=t=>s.value.nbplace=t)},null,512),[[S,s.value.nbplace]])]),e("label",Vn,[In,_(e("input",{type:"text",placeholder:"Lien vers le site correspondant à l'accord",class:"input input-bordered w-full","onUpdate:modelValue":n[14]||(n[14]=t=>s.value.lien=t)},null,512),[[S,s.value.lien]])]),e("label",Dn,[$n,_(e("input",{type:"text",placeholder:"Description de l'accord",class:"input input-bordered w-full","onUpdate:modelValue":n[15]||(n[15]=t=>s.value.description=t)},null,512),[[S,s.value.description]])]),Sn],32)])]),e("div",null,[Mn,E.value&&E.value.agreements?(a(),i("div",En,[Nn,e("p",null,l(ve.value.length)+" résultats ("+l(u.value.length+I.value.length+z.value.length)+" filtre"+l(I.value.length+u.value.length+z.value.length>1?"s":"")+")",1),e("div",null,[e("div",{class:"bg-base-300 p-2 mt-1 flex justify-between items-center hover:opacity-60 hover:cursor-pointer",onClick:n[16]||(n[16]=t=>pe("pays"))},[e("p",null,"Pays ("+l(I.value.length)+" séléctionné"+l(I.value.length>1?"s":"")+")",1),e("span",{class:R([W.value.pays?"rotate-180":"","transform transition-transform text-xl select-none"])},"▾",2)]),_(e("div",Ln,[e("button",{class:"hover:opacity-70 underline",onClick:We},"Tout désélectionner"),e("div",Tn,[(a(!0),i(j,null,V($.value,(t,f)=>(a(),i("div",{key:f,class:"flex items-center hover:opacity-60 my-1 w-1/2 sm:w-1/3 lg:w-1/4 xl:w-1/5"},[_(e("input",{id:"filt_pays_"+f,type:"checkbox",class:"checkbox",value:t.parco_name,"onUpdate:modelValue":n[17]||(n[17]=A=>I.value=A)},null,8,zn),[[de,I.value]]),e("label",{for:"filt_pays_"+f,class:"flex w-full items-center cursor-pointer pl-2"},[e("span",{class:R(["fi mr-1","fi-"+t.parco_code])},null,2),e("label",{for:"filt_pays_"+f,class:"select-none w-full cursor-pointer"},l(t.parco_name),9,Pn)],8,Bn)]))),128))])],512),[[he,W.value.pays]])]),e("div",null,[e("div",{class:"bg-base-300 p-2 mt-1 flex justify-between items-center hover:opacity-60 hover:cursor-pointer",onClick:n[18]||(n[18]=t=>pe("departments"))},[e("p",null,"Départements ("+l(u.value.length)+" séléctionné"+l(u.value.length>1?"s":"")+")",1),e("span",{class:R([W.value.departments?"rotate-180":"","transform transition-transform text-xl select-none"])},"▾",2)]),_(e("div",Fn,[e("button",{class:"hover:opacity-70 underline",onClick:Re},"Tout désélectionner"),(a(!0),i(j,null,V(D.value.components,(t,f)=>(a(),i("div",{key:f},[e("div",qn,[e("p",null,l(t.comp_name),1),e("div",On,[(a(!0),i(j,null,V(t.departments,(A,F)=>(a(),i("div",{key:F,class:"flex items-center hover:opacity-60 my-1"},[_(e("input",{id:"filt_dept_"+F,type:"checkbox",class:"checkbox",value:A.dept_shortname,"onUpdate:modelValue":n[19]||(n[19]=X=>u.value=X)},null,8,Gn),[[de,u.value]]),e("label",{for:"filt_dept_"+F,class:"w-full flex items-center justify-center cursor-pointer pl-2"},[e("div",{class:"w-6 h-3 mr-2",style:be({backgroundColor:A.dept_color})},null,4),e("label",{for:"filt_dept_"+F,class:"select-none w-full cursor-pointer"},l(A.dept_shortname),9,Rn)],8,Hn)]))),128))])])]))),128))],512),[[he,W.value.departments]])]),e("div",null,[e("div",{class:"bg-base-300 p-2 mt-1 flex justify-between items-center hover:opacity-60 hover:cursor-pointer",onClick:n[20]||(n[20]=t=>pe("component"))},[e("p",null,"Composante ("+l(z.value.length)+" séléctionné"+l(z.value.length>1?"s":"")+")",1),e("span",{class:R([W.value.component?"rotate-180":"","transform transition-transform text-xl select-none"])},"▾",2)]),_(e("div",Wn,[e("button",{class:"hover:opacity-70 underline",onClick:Je},"Tout désélectionner"),e("div",Jn,[(a(!0),i(j,null,V(D.value.components,(t,f)=>(a(),i("div",{key:f,class:"flex items-center hover:opacity-60 my-1 w-fit"},[_(e("input",{id:"filt_compo_"+f,type:"checkbox",class:"checkbox",value:t.comp_name,"onUpdate:modelValue":n[21]||(n[21]=A=>z.value=A)},null,8,Kn),[[de,z.value]]),e("label",{for:"filt_compo_"+f,class:"select-none w-full cursor-pointer pl-2"},l(t.comp_name),9,Qn)]))),128))])],512),[[he,W.value.component]])])])):U("",!0),e("div",null,[ve.value.length>0?(a(),i("div",Xn,[(a(!0),i(j,null,V(ve.value,(t,f)=>{var A,F,X,le,H,J,ue,Ce,Ae;return a(),i("div",{key:f,class:"m-5 p-3 flex"},[e("div",Yn,[e("div",Zn,[e("span",{class:"tooltip mr-2","data-tip":((A=t.partnercountry)==null?void 0:A.parco_name)||"Introuvable"},[e("span",ts,[e("span",{class:R(["fi text-5xl","fi-"+(((F=t.partnercountry)==null?void 0:F.parco_code)||"")])},null,2),(X=t.partnercountry)!=null&&X.parco_code?U("",!0):(a(),i("span",ns," ? "))])],8,es),e("div",null,[e("p",null,[e("span",ss,l(((le=t.university)==null?void 0:le.univ_name)||"Nom université non disponible"),1),L(" à "+l(((H=t.university)==null?void 0:H.univ_city)||"Ville non disponible")+" ("+l(((J=t.partnercountry)==null?void 0:J.parco_name)||"Pays non disponible")+") ",1),e("span",null,[e("span",null,"Nombre de places: "+l(t.agree_nbplace||"Non spécifié"),1),L(", "),e("span",null,"Type accord: "+l(t.agree_typeaccord||"Non spécifié"),1)])]),e("p",null," ["+l(((ue=t.isced)==null?void 0:ue.isc_code)||"Code ISCED non disponible")+" - "+l(((Ce=t.isced)==null?void 0:Ce.isc_name)||"Nom ISCED non disponible")+"] Composante: "+l(((Ae=t.component)==null?void 0:Ae.comp_name)||"Nom composante non disponible")+" N°: "+l(t.agree_id),1)])]),e("div",os,[t.agree_lien?(a(),i("a",{key:0,href:t.agree_lien,class:"hover:opacity-80 text-blue-700 hover:cursor-pointer hover:underline"}," Cliquez ici pour accéder au site de l'université ",8,ls)):U("",!0)]),e("div",null,[e("p",null,[L("Description: "),t.agree_description?(a(),i("span",as,l(t.agree_description),1)):U("",!0),t.agree_description?U("",!0):(a(),i("span",is,"Aucune"))])]),rs,e("div",cs,[(a(!0),i(j,null,V(t.departments,(b,fe)=>{var ae,Ue,je,Ve;return a(),i("div",{key:fe},[e("div",{class:R(["w-fit p-2 flex items-center justify-center mx-1 tooltip select-none font-bold",{"opacity-50":((ae=b.pivot)==null?void 0:ae.deptagree_valide)===0}]),"data-tip":(((Ue=b.pivot)==null?void 0:Ue.deptagree_valide)===0?"(INVISIBLE) ":"")+"Département "+(b.dept_name||"Nom département non disponible"),style:be({backgroundColor:b.dept_color||"#FFFFFF"})},[e("p",null,[L(l(b.dept_shortname||"Abréviation département non disponible")+" ",1),e("span",ds,l(((je=b.pivot)==null?void 0:je.deptagree_valide)===0?" (Invisible)":""),1)]),e("button",{class:"hover:opacity-60 hover:cursor-pointer bg-base-300 flex items-center justify-center p-1 ml-2",onClick:Ke=>{var Ie;return Ge(t.agree_id,b.dept_id,(Ie=b.pivot)==null?void 0:Ie.deptagree_valide,b.dept_shortname)}},[((Ve=b.pivot)==null?void 0:Ve.deptagree_valide)===1?(a(),i("svg",ms,_s)):(a(),i("svg",fs,hs))],8,ps),e("button",{class:"hover:opacity-60 hover:cursor-pointer bg-base-300 flex items-center justify-center p-1 ml-2",onClick:Ke=>Be(t.agree_id,b.dept_id)},gs,8,bs)],14,us)])}),128)),e("p",{class:"bg-base-200 p-4 hover:cursor-pointer hover:opacity-60 select-none mx-1",onClick:b=>ke(t.agree_id)},"Ajouter un département",8,xs)]),te.value[t.agree_id]?(a(),i("div",ks,[e("form",{onSubmit:we(b=>He(t.agree_id),["prevent"])},[As,e("div",Us,[_(e("select",{class:"select select-bordered w-full max-w-xs",id:"form_dept_select_"+t.agree_id,"onUpdate:modelValue":b=>ie.value[t.agree_id]=b},[Vs,(a(!0),i(j,null,V(qe(t),(b,fe)=>{var ae;return a(),i("option",{key:fe,value:b.dept_id,style:be({color:b.dept_color+" !important"})}," ("+l(((ae=b.component)==null?void 0:ae.comp_name)||"Nom composante non disponible")+") "+l(b.dept_shortname||"Abréviation département non disponible"),13,Is)}),128))],8,js),[[q,ie.value[t.agree_id]]]),Ds,e("div",{class:"flex items-center justify-center",onClick:b=>ke(t.agree_id)},Ms,8,$s)])],40,Cs)])):U("",!0)]),e("label",{for:"my_modal_"+t.agree_id,class:"hover:opacity-60 hover:cursor-pointer bg-base-300 flex items-center justify-center p-5"},Ls,8,Es),ye(Nt,{onAgreementUpdated:Z,accord:t,isceds:g.value,composantes:D.value.components,universites:B.value,partnercountrys:$.value},null,8,["accord","isceds","composantes","universites","partnercountrys"]),e("button",{class:"hover:opacity-60 hover:cursor-pointer bg-base-300 flex items-center justify-center p-5",onClick:b=>$e(t)},Bs,8,Ts)])}),128))])):(a(),i("div",Ps,qs))]),e("dialog",Os,[e("div",Gs,[Hs,e("div",Rs,[Ws,Js,m.value.bool?(a(),i("p",Ks,"Veuillez patienter "+l(m.value.time)+" secondes avant de confirmer.",1)):U("",!0)]),e("div",Qs,[e("button",{class:"btn",onClick:me},"Annuler"),e("button",{class:"btn btn-error",onClick:n[22]||(n[22]=t=>Pe()),disabled:m.value.bool},"Confirmer",8,Xs)])])],512),e("dialog",Ys,[e("div",Zs,[eo,e("div",to,[no,e("div",so,[e("div",oo,[e("span",{class:"tooltip mr-2","data-tip":((y=k.value.partnercountry)==null?void 0:y.parco_name)||"Introuvable"},[e("span",ao,[e("span",{class:R(["fi text-5xl","fi-"+(((N=k.value.partnercountry)==null?void 0:N.parco_code)||"")])},null,2),(P=k.value.partnercountry)!=null&&P.parco_code?U("",!0):(a(),i("span",io," ? "))])],8,lo),e("div",ro,[e("p",co,[e("strong",null,l(((G=(O=k.value)==null?void 0:O.university)==null?void 0:G.univ_name)||"Université indisponible"),1),L(" à "+l(((v=(c=k.value)==null?void 0:c.university)==null?void 0:v.univ_city)||"Ville indisponible")+" ("+l(((ee=(Q=k.value)==null?void 0:Q.partnercountry)==null?void 0:ee.parco_name)||"Pays indisponible")+")",1)]),e("p",null,"["+l(((ne=(re=k.value)==null?void 0:re.isced)==null?void 0:ne.isc_code)||"Code ISCED non disponible")+" - "+l(((oe=(se=k.value)==null?void 0:se.isced)==null?void 0:oe.isc_name)||"Nom ISCED non disponible")+"] Composante: "+l(((ce=(_e=k.value)==null?void 0:_e.component)==null?void 0:ce.comp_name)||"Indisponible"),1)])])])]),e("div",uo,[e("button",{class:"btn btn-error",onClick:me},"Annuler"),e("button",{class:"btn btn-success",onClick:n[23]||(n[23]=t=>{var f;return Fe(((f=k.value.university)==null?void 0:f.univ_name)||"Univeristé indisponible",k.value.agree_id)})},"Confirmer")])])],512),e("dialog",po,[e("div",mo,[vo,e("div",_o,[fo,yo,e("p",null,[L("Nombre d'accord séléctionné à ajouter: "),e("strong",null,l(d.value.filter(t=>t.add).length),1)]),e("div",{class:"my-4"},[e("button",{class:"hover:opacity-70 underline",onClick:Ne},"Tout sélectionner"),e("button",{class:"hover:opacity-70 ml-2 underline",onClick:Le},"Tout désélectionner")]),e("div",null,[(a(!0),i(j,null,V(d.value,(t,f)=>(a(),i("div",{key:f,class:R([{"bg-base-200":!t.add,"bg-base-300":t.add},"flex select-none my-2 items-center cursor-pointer"]),onClick:A=>t.add=!t.add},[_(e("input",{type:"checkbox","onUpdate:modelValue":A=>t.add=A,class:"opacity-70 checkbox checkbox-sm m-2 hover:opacity-50 hover:scale-110 transition-all"},null,8,bo),[[de,t.add]]),e("span",wo,[e("span",{class:R(["fi xl:text-5xl text-xl transition-all duration-100 ease-in-out","fi-"+Te(t.Pays)])},null,2)]),e("div",go,[e("p",xo,[L("("+l(t.Pays)+") ",1),e("span",ko,l(t.Ville?t.Ville:"Aucune ville")+" - "+l(t.Universite?t.Universite:"Aucune université"),1)]),e("p",null,"("+l(t.Isced?t.Isced:"Aucun ISCED")+") "+l(t.Composante?t.Composante:"Aucune composante")+" - "+l(t.Departements?t.Departements:"Aucun départements"),1)])],10,ho))),128))])]),e("div",{class:"modal-action"},[e("button",{class:"btn btn-error",onClick:xe},"Annuler"),e("button",{class:"btn btn-success",onClick:Ee},"Confirmer")])])],512)])])):(a(),et(nt,{key:1}))])}}};export{Uo as default};
