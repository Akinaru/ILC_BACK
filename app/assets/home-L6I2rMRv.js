import{r as k,k as he,o as me,b as xe,d as a,e as r,g as e,I as D,f as ie,w as we,y as C,C as ge,A as _,u as q,B as i,F as P,t as T,q as be,M as ye,h as V,i as b,L as ke,n as ae}from"./index-B86mjc3y.js";const Ce={key:0,class:"flex flex-col"},je=e("p",{class:"font-bold text-lg pb-5"},"Bienvenue sur votre profil étudiant lié aux relations internationales.",-1),De={class:"w-full flex items-center justify-center flex-col py-4 md:py-10"},Ve=e("p",{class:"py-4"},"Avancement des étapes actuelles:",-1),Ee={class:"steps steps-vertical sm:steps-horizontal max-w-lg"},Me=e("li",{class:"step step-primary"},"Inscription",-1),Be=e("li",{class:"step step-primary"},"Choix des vœux",-1),Le={key:0,class:"flex items-center justify-center flex-col"},$e=e("p",{class:"text-sm font-bold pb-2"},"Destination finale",-1),Ie={class:"select-none flex justify-between items-center elementDrag xl:w-120 md:w-105 w-96 h-20 transition-all duration-100 ease-in-out"},Se={class:"border-warning border-2 p-1 flex items-center justify-center w-full h-20 select-none"},ze=["data-tip"],Ne={class:"w-full select-none"},Pe={class:"font-bold"},Te={key:0,class:"block md:flex w-full justify-center items-center"},Ue={class:"w-full md:w-1/2 pt-10 flex items-center justify-center flex-col"},Ae=e("p",{class:"text-lg font-bold w-full max-w-xl mb-5"},"Vos informations:",-1),Fe=e("p",{class:"w-full max-w-xl"},"Vos informations ne peuvent pas être modifiées. Renseignez-vous auprès d'ILC si besoin.",-1),Ge={class:"w-full max-w-xl"},Oe={class:"form-control w-full items-center justify-center"},He=e("div",{class:"label w-full"},[e("span",{class:"label-text"},"Identitée")],-1),Ze=["value"],Re={class:"form-control w-full items-center justify-center"},qe=e("div",{class:"label w-full"},[e("span",{class:"label-text"},"Email")],-1),We=["value"],Ke={class:"form-control w-full items-center justify-center"},Ye=e("div",{class:"label w-full"},[e("span",{class:"label-text"},"Numéro étudiant")],-1),Je=["value"],Qe={class:"form-control w-full items-center justify-center"},Xe=e("div",{class:"label w-full"},[e("span",{class:"label-text"},"Département")],-1),et=["value"],tt={class:"form-control w-full items-center justify-center"},st=e("div",{class:"label w-full"},[e("span",{class:"label-text"},"Score TOEIC")],-1),nt=["value"],lt={class:"w-full md:w-1/2 pt-10 flex items-center justify-center flex-col"},ot=e("p",{class:"text-md font-bold"},"Vos documents:",-1),it={class:"w-full max-w-xl"},at={class:"form-control w-full py-3"},rt=e("div",{class:"label"},[e("span",{class:"label-text"},"Choix de cours")],-1),ct=e("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor"},[e("path",{d:"M3,12.3v7a2,2,0,0,0,2,2H19a2,2,0,0,0,2-2v-7",fill:"none","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"}),e("polyline",{points:"7.9 12.3 12 16.3 16.1 12.3",fill:"none","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"}),e("line",{x1:"12",x2:"12",y1:"2.7",y2:"14.2",fill:"none","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"})],-1),ut={key:1,class:"btn mb-1",disabled:""},dt=e("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M3,12.3v7a2,2,0,0,0,2,2H19a2,2,0,0,0,2-2v-7",fill:"none",stroke:"#777777","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"}),e("polyline",{points:"7.9 12.3 12 16.3 16.1 12.3",fill:"none",stroke:"#777777","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"}),e("line",{x1:"12",x2:"12",y1:"2.7",y2:"14.2",fill:"none",stroke:"#777777","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"})],-1),vt=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13 10V3l9 9-9 9v-7H3V10h10z"})],-1),pt=e("span",null,"Envoyer votre fichier",-1),_t=[vt,pt],ft={key:3,class:"w-full flex flex-col"},ht=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-warning",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.458 12C3.732 7.943 7.522 5 12 5c4.478 0 8.268 2.943 9.542 7-.02.079-.046.155-.07.232C20.268 16.057 16.478 19 12 19c-4.478 0-8.268-2.943-9.542-7 .024-.077.05-.153.07-.232z"})],-1),mt=e("span",{class:"text-warning"},"Voir votre fichier",-1),xt=[ht,mt],wt=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-error",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1),gt=e("span",{class:"text-error"},"Supprimer votre fichier",-1),bt=[wt,gt],yt={class:"form-control w-full py-3"},kt=e("div",{class:"label"},[e("span",{class:"label-text"},"Contrat pédagogique")],-1),Ct=e("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor"},[e("path",{d:"M3,12.3v7a2,2,0,0,0,2,2H19a2,2,0,0,0,2-2v-7",fill:"none","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"}),e("polyline",{points:"7.9 12.3 12 16.3 16.1 12.3",fill:"none","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"}),e("line",{x1:"12",x2:"12",y1:"2.7",y2:"14.2",fill:"none","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"})],-1),jt={key:1,class:"btn mb-1",disabled:""},Dt=e("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M3,12.3v7a2,2,0,0,0,2,2H19a2,2,0,0,0,2-2v-7",fill:"none",stroke:"#777777","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"}),e("polyline",{points:"7.9 12.3 12 16.3 16.1 12.3",fill:"none",stroke:"#777777","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"}),e("line",{x1:"12",x2:"12",y1:"2.7",y2:"14.2",fill:"none",stroke:"#777777","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"})],-1),Vt=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13 10V3l9 9-9 9v-7H3V10h10z"})],-1),Et=e("span",null,"Envoyer votre fichier",-1),Mt=[Vt,Et],Bt={key:3,class:"w-full flex flex-col"},Lt=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-warning",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.458 12C3.732 7.943 7.522 5 12 5c4.478 0 8.268 2.943 9.542 7-.02.079-.046.155-.07.232C20.268 16.057 16.478 19 12 19c-4.478 0-8.268-2.943-9.542-7 .024-.077.05-.153.07-.232z"})],-1),$t=e("span",{class:"text-warning"},"Voir votre fichier",-1),It=[Lt,$t],St=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-error",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1),zt=e("span",{class:"text-error"},"Supprimer votre fichier",-1),Nt=[St,zt],Pt={class:"form-control w-full py-3"},Tt=e("div",{class:"label"},[e("span",{class:"label-text"},"Relevé des notes")],-1),Ut=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13 10V3l9 9-9 9v-7H3V10h10z"})],-1),At=e("span",null,"Envoyer votre fichier",-1),Ft=[Ut,At],Gt={key:1,class:"w-full flex flex-col"},Ot=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-warning",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.458 12C3.732 7.943 7.522 5 12 5c4.478 0 8.268 2.943 9.542 7-.02.079-.046.155-.07.232C20.268 16.057 16.478 19 12 19c-4.478 0-8.268-2.943-9.542-7 .024-.077.05-.153.07-.232z"})],-1),Ht=e("span",{class:"text-warning"},"Voir votre fichier",-1),Zt=[Ot,Ht],Rt=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-error",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1),qt=e("span",{class:"text-error"},"Supprimer votre fichier",-1),Wt=[Rt,qt],Kt={id:"confirmModalDoc",ref:"confirmModalDoc",class:"modal"},Yt={class:"modal-box"},Jt=e("h3",{class:"text-lg font-bold"},"Confirmer la suppression ?",-1),Qt={class:"py-3"},Xt={class:"modal-action"},es={key:1,class:"px-5 xl:px-20 transition-all duration-100 ease-in-out"},ts={class:"md:block hidden pt-5"},ss={class:"text-center"},ns=e("p",{class:"text-center"},"Ajoutez des accords aux favoris pour ensuite les choisir comme vœux.",-1),ls={class:"text-center"},os={class:"font-bold"},is={class:"flex *:mr-5 py-5 justify-center"},as={class:"flex flex-col justify-center items-center w-2/5"},rs=e("p",{class:"font-bold text-xl flex *:mx-1 py-2 items-center"},[e("span",null,"Vos favoris"),e("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{fill:"currentColor",stroke:"currentColor","stroke-width":"2",d:"M12 .587l3.668 7.429L24 9.753l-6 5.847 1.417 8.265L12 18.896l-7.417 3.969L6 15.6 0 9.753l8.332-1.737L12 .587z"})])],-1),cs={id:"left",class:"flex flex-col bg-base-200 p-5 *:my-1 h-full w-full"},us=["id"],ds={class:"bg-base-300 flex items-center justify-center w-full h-20 select-none"},vs={class:"relative inline-block mr-2"},ps={key:0,class:"absolute inset-0 flex items-center justify-center text-black text-2xl font-bold bg-white select-none"},_s={class:"w-full select-none xl:text-base text-xs"},fs={class:"font-bold"},hs={key:1},ms=e("p",{class:"flex items-center justify-center"},"Aucun favoris dans la liste",-1),xs=[ms],ws={class:"flex flex-col items-center justify-start w-3/5"},gs=e("p",{class:"font-bold text-xl flex *:mx-1 py-2 items-center"},[e("span",null,"Vos vœux"),e("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{fill:"currentColor",d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})])],-1),bs={id:"right",class:"bg-base-200 flex flex-col *:m-3 w-full"},ys={class:"font-bold xl:pr-5 pr-3 xl:text-lg transition-all duration-100 ease-in-out min-w-fit"},ks=["id"],Cs=["id"],js={class:"relative inline-block mr-2"},Ds={key:0,class:"absolute inset-0 flex items-center justify-center text-black text-2xl font-bold bg-white select-none"},Vs={class:"w-full select-none xl:text-md text-sm transition-all duration-100 ease-in-out"},Es={class:"font-bold"},Ms=["onClick"],Bs=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"stroke-current shrink-0 h-5 w-5",fill:"none",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),Ls=[Bs],$s={key:1,class:"opacity-45 select-none w-96 flex items-center justify-center"},Is={class:"md:hidden btn-block pt-10"},Ss=e("p",null,"Ajoutez des accords aux favoris pour ensuite les choisir comme vœux.",-1),zs={class:"font-bold"},Ns={key:0,class:"bg-base-200 drop-shadow-lg lg:w-96 w-full lg:my-0 my-5"},Ps=e("p",{class:"bg-base-300 p-3 flex items-center justify-center font-bold text-lg"},"Favoris",-1),Ts={class:"p-1"},Us={class:"lg:block flex flex-wrap"},As=["id"],Fs={class:"bg-base-300 flex items-center justify-center w-full h-20 select-none"},Gs={class:"relative inline-block mr-1"},Os={key:0,class:"absolute inset-0 flex items-center justify-center text-black text-xl font-bold bg-white select-none"},Hs={class:"w-full select-none text-xs"},Zs={class:"font-bold"},Rs={key:1,class:"w-full"},qs=e("p",{class:"flex items-center justify-center"},"Aucun favoris dans la liste",-1),Ws=[qs],Ks=["id"],Ys=["id"],Js={class:"relative inline-block mr-1"},Qs={key:0,class:"absolute inset-0 flex items-center justify-center text-black text-xl font-bold bg-white select-none"},Xs={class:"w-full select-none text-xs"},en={class:"font-bold"},tn=["onClick"],sn=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"stroke-current shrink-0 h-5 w-5",fill:"none",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),nn=[sn],ln=["onClick"],on={class:"text-lg"},an=e("p",{class:"opacity-50"},"Cliquez pour ajouter un accord",-1),rn=e("input",{type:"checkbox",id:"modal_ajout_accord",class:"modal-toggle"},null,-1),cn={class:"modal",role:"dialog"},un={class:"modal-box"},dn={class:"font-bold text-lg pb-3"},vn=["onClick","id"],pn={class:"bg-base-300 flex items-center justify-center w-full h-20 select-none"},_n={class:"relative inline-block"},fn={key:0,class:"absolute inset-0 flex items-center justify-center text-black text-2xl font-bold bg-white select-none"},hn={class:"w-full select-none text-xs"},mn={class:"font-bold"},xn={key:1,class:"w-full"},wn=e("p",{class:"flex items-center justify-center"},"Aucun favoris dans la liste",-1),gn=[wn],bn=e("div",{class:"modal-action"},[e("label",{for:"modal_ajout_accord",class:"btn"},"Annuler")],-1),yn={key:2},kn={class:"flex flex-col items-center justify-start pt-10"},Cn=e("p",{class:"font-bold text-xl flex *:mx-1 py-2 items-center"},[e("span",null,"Vos vœux"),e("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{fill:"currentColor",d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})])],-1),jn=e("div",{class:"py-5 text-center"},[e("p",null,"Vous ne pouvez plus modifier vos vœux car la date limite a été atteinte."),e("p",null,"Si votre destination finale correspond à un de vos vœux, alors la case sera entourée en jaune.")],-1),Dn={id:"right",class:"bg-base-200 flex flex-col *:m-3"},Vn={class:"font-bold xl:p-5 p-3 xl:text-lg transition-all duration-100 ease-in-out"},En={class:"bg-base-100 h-20 xl:w-130 w-105 flex items-center justify-center transition-all duration-100 ease-in-out"},Mn={key:0,draggable:!0,class:"select-none flex justify-between items-center xl:w-150 w-120 transition-all duration-100 ease-in-out h-20 hover:opacity-80"},Bn=["data-tip"],Ln={class:"w-full select-none"},$n={class:"font-bold"},In={key:1,class:"opacity-45 select-none w-96 flex items-center justify-center"},Sn={key:1},Pn={__name:"home",setup(zn){const f=k([]),d=k([]),G=k([]),L=k([]),m=k([]),M=k([]),W=k(!1),E=he(),j=k([]),n=k({1:null,2:null,3:null,4:null,5:null,6:null}),A=k({favoris:!1}),h=k({choixCours:{file:null,exist:!1,path:""},contratPeda:{file:null,exist:!1,path:""},releveNote:{file:null,exist:!1,path:""}}),y=k({choixCours:{exist:!1,path:""},contratPeda:{exist:!1,path:""},releveNote:{exist:!1,path:""}}),$=k({folder:"",title:"",type:""}),S=k(null);function re(l){A.value[l]=!A.value[l]}function ce(l){S.value=l}function ue(l){const s=`voeu${S.value}`;if(document.getElementById(s)){n.value[S.value]&&F(n.value[S.value].agree_id),n.value[S.value]=z(l),F(l),I(),N();const t=document.getElementById("modal_ajout_accord");t&&(t.checked=!1)}}async function de(){j.value=G.value.filter(o=>o.acc_id===E.login&&!_e(o.agree_id)).map(o=>L.value.agreements.find(t=>t.agree_id===o.agree_id));let l=1;J()>0&&Object.keys(d.value.wishes).forEach(o=>{if(o.startsWith("wsha_")){const t=d.value.wishes[o];if(t!=null){const c=L.value.agreements.find(u=>u.agree_id===t);c&&(n.value[l]=c)}l++}}),await ae();let s=document.getElementsByClassName("voeuxDrop");I();for(let o of s)o.addEventListener("dragover",function(t){t.preventDefault()}),o.addEventListener("drop",function(t){t.preventDefault();let c=t.dataTransfer.getData("text/plain"),u=document.getElementById(c);if(u){const v=u.id.replace("accord_wish_",""),p=o.id.replace("voeu","");if(pe(v)){const x=X(v),w=document.getElementById(`voeu${x}`);if(x!==null&&w.id!==o.id)if(ee(p)){const g=z(n.value[p].agree_id),U=w.id.replace("voeu","");n.value[p]=z(v),n.value[U]=g,I(),N()}else n.value[X(v)]=null,n.value[p]=z(v),I(),N()}else ee(p)?(Y(n.value[p].agree_id)&&ne(n.value[p].agree_id),F(v),n.value[p]=z(v),I(),N()):(F(v),n.value[p]=z(v),I(),N())}})}async function I(){await ae();let l=document.getElementsByClassName("elementDrag");for(let s of l)s.hasListener||(s.addEventListener("dragstart",ve),s.hasListener=!0)}function ve(l){l.dataTransfer.setData("text/plain",l.target.id)}async function K(){await V("GET",!1,d,b.apiUrl+"api/account/getbylogin/"+E.login),await V("GET",!1,L,b.apiUrl+"api/agreement"),await V("GET",!1,G,b.apiUrl+"api/favoris"),await V("GET",!1,M,b.apiUrl+"api/admin"),await V("GET",!1,m,b.apiUrl+"api/arbitrage/getbyid/"+E.login),await V("GET",!1,f,b.apiUrl+"api/documents/checkexist/admin/choix_cours"),f.value.status==200&&(h.value.choixCours.exist=!0,h.value.choixCours.path=f.value.path),await V("GET",!1,f,b.apiUrl+"api/documents/checkexist/admin/contrat_peda"),f.value.status==200&&(h.value.contratPeda.exist=!0,h.value.contratPeda.path=f.value.path),await V("GET",!1,f,b.apiUrl+"api/documents/checkexistperso/etu/choix_cours/"+E.login),f.value.status==200&&(y.value.choixCours.exist=!0,y.value.choixCours.path=f.value.path),await V("GET",!1,f,b.apiUrl+"api/documents/checkexistperso/etu/contrat_peda/"+E.login),f.value.status==200&&(y.value.contratPeda.exist=!0,y.value.contratPeda.path=f.value.path),await V("GET",!1,f,b.apiUrl+"api/documents/checkexistperso/etu/releve_note/"+E.login),f.value.status==200&&(y.value.releveNote.exist=!0,y.value.releveNote.path=f.value.path),W.value=!0,de()}function Y(l){return G.value.some(s=>s.agree_id===l&&s.acc_id===E.login)}function pe(l){const s=Object.values(n.value).map(t=>t?t.agree_id.toString():null),o=l.toString();return s.includes(o)}function J(){if(d.value.wishes&&d.value.wishes.acc_id){const l=d.value.wishes.wsha_one!=null?1:0,s=d.value.wishes.wsha_two!=null?1:0,o=d.value.wishes.wsha_three!=null?1:0,t=d.value.wishes.wsha_four!=null?1:0,c=d.value.wishes.wsha_five!=null?1:0,u=d.value.wishes.wsha_six!=null?1:0;return l+s+o+t+c+u}}function Q(){const l=n.value[1]!=null?1:0,s=n.value[2]!=null?1:0,o=n.value[3]!=null?1:0,t=n.value[4]!=null?1:0,c=n.value[5]!=null?1:0,u=n.value[6]!=null?1:0;return l+s+o+t+c+u}function _e(l){if(J()>0)return Object.keys(d.value.wishes).filter(t=>t.startsWith("wsha_")).map(t=>d.value.wishes[t]).includes(l)}function X(l){for(const[s,o]of Object.entries(n.value))if(o&&o.agree_id==l)return parseInt(s);return null}function ee(l){return l>=1&&l<=Object.keys(n.value).length?n.value[l.toString()]!==null:!1}function O(l,s,o){$.value.folder=l,$.value.title=s,$.value.type=o,document.getElementById("confirmModalDoc").showModal()}function te(){document.getElementById("confirmModalDoc").close()}async function fe(l,s,o){te(),await V("GET",!0,f,`${b.apiUrl}api/documents/deleteperso/${l}/${l}_${E.login}`),f.value.status==200&&(y.value[s].exist=!1,y.value[s].path="")}const H=(l,s)=>{const o=l.target.files[0];o?h.value[s].file=o:h.value[s].file=null};function se(l){const s=l.split("/"),o=s[s.length-1],t=b.apiUrl+`api/documents/get/admin/${o}`;if(o.toLowerCase().endsWith(".pdf"))window.open(t,"_blank");else{const c=document.createElement("a");c.href=t,c.download=o,document.body.appendChild(c),c.click(),document.body.removeChild(c)}}async function Z(l){const s=l.split("/"),o=s[s.length-1],t=s[2];o.split("_")[2].split(".")[0];const c=`${b.apiUrl}api/documents/getperso/etu/${t}/${o}`;if(o.toLowerCase().endsWith(".pdf"))window.open(c,"_blank");else{const u=document.createElement("a");u.href=c,u.download=o,document.body.appendChild(u),u.click(),document.body.removeChild(u)}}async function R(l,s,o){const t=new FormData;t.append("file",o),t.append("title",l),t.append("folder",s),await V("POST",!0,f,b.apiUrl+"api/documents",t),f.value.status==200&&(h.value.choixCours.file=null,h.value.contratPeda.file=null,h.value.releveNote.file=null),K()}function F(l){const s=j.value.findIndex(o=>o.agree_id==l);s!==-1&&j.value.splice(s,1)}function ne(l){const s=L.value.agreements.find(o=>o.agree_id===l);s&&j.value.push(s)}function z(l){for(const s of Object.values(L.value.agreements))if(s&&s.agree_id==l)return s;return null}function le(l,s){n.value[s]=null,Y(l)&&(ne(l),I()),N()}function B(l){const t=new Date(l)-new Date;return Math.ceil(t/(1e3*60*60*24))}function oe(l){const s=new Date(l),o=s.getDate().toString().padStart(2,"0"),t=(s.getMonth()+1).toString().padStart(2,"0"),c=s.getFullYear();return`${o}/${t}/${c}`}async function N(){const l={acc_id:E.login,wsha_one:n.value[1]!=null?n.value[1].agree_id:null,wsha_two:n.value[2]!=null?n.value[2].agree_id:null,wsha_three:n.value[3]!=null?n.value[3].agree_id:null,wsha_four:n.value[4]!=null?n.value[4].agree_id:null,wsha_five:n.value[5]!=null?n.value[5].agree_id:null,wsha_six:n.value[6]!=null?n.value[6].agree_id:null};await V("POST",!0,f,b.apiUrl+"api/wishagreement",l)}return me(K),(l,s)=>{const o=xe("RouterLink");return W.value?(a(),r("div",Ce,[je,e("div",De,[Ve,e("ul",Ee,[Me,Be,e("li",{class:D(["step",{"step-primary":m.value.agree_id||B(M.value.adm_datelimite)<0}])},"Arbitrage",2),e("li",{class:D(["step",{"step-primary":m.value.agree_id}])},"Validation",2)])]),m.value.agreement?(a(),r("div",Le,[$e,e("div",Ie,[ie(o,{to:{name:"Accord",params:{agree_id:m.value.agreement.agree_id}},class:"group hover:opacity-60 relative"},{default:we(()=>[e("div",Se,[e("span",{class:"tooltip mr-2","data-tip":m.value.agreement.partnercountry.parco_name},[e("span",{class:D(["fi xl:text-5xl text-xl transition-all duration-100 ease-in-out","fi-"+m.value.agreement.partnercountry.parco_code])},null,2)],8,ze),e("p",Ne,[_("("+i(m.value.agreement.partnercountry.parco_name)+") ",1),e("span",Pe,i(m.value.agreement.university.univ_city)+" - "+i(m.value.agreement.university.univ_name),1),_(" ("+i(m.value.agreement.isced.isc_code)+")",1)])])]),_:1},8,["to"])])])):C("",!0),e("div",null,[d.value&&d.value.acc_id?(a(),r("div",Te,[e("div",Ue,[Ae,Fe,e("div",Ge,[e("label",Oe,[He,e("input",{type:"text",value:d.value.acc_fullname,class:"input input-bordered w-full",disabled:""},null,8,Ze)]),e("label",Re,[qe,e("input",{type:"text",value:d.value.acc_mail,class:"input input-bordered w-full",disabled:""},null,8,We)]),e("label",Ke,[Ye,e("input",{type:"text",value:d.value.acc_studentnum,class:"input input-bordered w-full",disabled:""},null,8,Je)]),e("label",Qe,[Xe,e("input",{type:"text",value:d.value.department?d.value.department.dept_shortname:"Aucun",class:"input input-bordered w-full",style:ge({borderBottom:"2px solid "+(d.value.department&&d.value.department.dept_color?d.value.department.dept_color:"grey")}),disabled:""},null,12,et)]),e("label",tt,[st,e("input",{type:"text",value:d.value.acc_toeic,class:"input input-bordered w-full",disabled:""},null,8,nt)])])]),e("div",lt,[ot,e("div",it,[e("div",at,[rt,h.value.choixCours.exist?(a(),r("div",{key:0,class:"btn btn-neutral text-success mb-1",onClick:s[0]||(s[0]=t=>se(h.value.choixCours.path))},[ct,_(" Telecharger le fichier disponible ")])):(a(),r("div",ut,[dt,_(" Aucun fichier disponible ")])),e("input",{accept:".pdf, .xls, .xlsx",onChange:s[1]||(s[1]=t=>H(t,"choixCours")),type:"file",class:"file-input file-input-bordered w-full mb-1"},null,32),h.value.choixCours.file!=null?(a(),r("div",{key:2,class:"btn btn-neutral text-primary mb-1 flex items-center space-x-2",onClick:s[2]||(s[2]=t=>R("choix_cours_"+q(E).login,"documents/etu/choix_cours",h.value.choixCours.file))},_t)):C("",!0),y.value.choixCours.exist?(a(),r("div",ft,[e("button",{class:"btn btn-neutral mb-1",onClick:s[3]||(s[3]=t=>Z(y.value.choixCours.path))},xt),e("button",{class:"btn btn-neutral mb-1",onClick:s[4]||(s[4]=t=>O("choix_cours","choixCours"))},bt)])):C("",!0)]),e("div",yt,[kt,h.value.contratPeda.exist?(a(),r("div",{key:0,class:"btn btn-neutral text-success mb-1",onClick:s[5]||(s[5]=t=>se(h.value.contratPeda.path))},[Ct,_(" Telecharger le fichier disponible ")])):(a(),r("div",jt,[Dt,_(" Aucun fichier disponible ")])),e("input",{accept:".pdf, .xls, .xlsx",onChange:s[6]||(s[6]=t=>H(t,"contratPeda")),type:"file",class:"file-input file-input-bordered w-full mb-1"},null,32),h.value.contratPeda.file!=null?(a(),r("div",{key:2,class:"btn btn-neutral text-primary mb-1 flex items-center space-x-2",onClick:s[7]||(s[7]=t=>R("contrat_peda_"+q(E).login,"documents/etu/contrat_peda",h.value.contratPeda.file))},Mt)):C("",!0),y.value.contratPeda.exist?(a(),r("div",Bt,[e("button",{class:"btn btn-neutral mb-1",onClick:s[8]||(s[8]=t=>Z(y.value.contratPeda.path))},It),e("button",{class:"btn btn-neutral mb-1",onClick:s[9]||(s[9]=t=>O("contrat_peda","contratPeda"))},Nt)])):C("",!0)]),e("div",Pt,[Tt,e("input",{accept:".pdf, .xls, .xlsx",onChange:s[10]||(s[10]=t=>H(t,"releveNote")),type:"file",class:"file-input file-input-bordered w-full mb-1"},null,32),h.value.releveNote.file!=null?(a(),r("div",{key:0,class:"btn btn-neutral text-primary mb-1 flex items-center space-x-2",onClick:s[11]||(s[11]=t=>R("releve_note_"+q(E).login,"documents/etu/releve_note",h.value.releveNote.file))},Ft)):C("",!0),y.value.releveNote.exist?(a(),r("div",Gt,[e("button",{class:"btn btn-neutral mb-1",onClick:s[12]||(s[12]=t=>Z(y.value.releveNote.path))},Zt),e("button",{class:"btn btn-neutral mb-1",onClick:s[13]||(s[13]=t=>O("releve_note","releveNote"))},Wt)])):C("",!0)]),e("dialog",Kt,[e("div",Yt,[Jt,e("div",Qt,[e("p",null,[_("Confirmez vous la suppression du fichier: "),e("strong",null,i($.value.title),1)])]),e("div",Xt,[e("button",{class:"btn btn-error",onClick:te},"Annuler"),e("button",{class:"btn btn-success",onClick:s[14]||(s[14]=t=>fe($.value.folder,$.value.title,$.value.type))},"Confirmer")])])],512)])])])):C("",!0)]),B(M.value.adm_datelimite)>0?(a(),r("div",es,[e("div",ts,[e("p",ss,"Vous avez "+i(j.value.length)+" favoris et "+i(Q())+" vœux.",1),ns,e("p",ls,[_("Date limite avant la fermeture des vœux : "),e("span",os,i(oe(M.value.adm_datelimite)),1),_(" ("+i(B(M.value.adm_datelimite))+" jour"+i(B(M.value.adm_datelimite)>1?"s":"")+" restant"+i(B(M.value.adm_datelimite)>1?"s":"")+")",1)]),e("div",is,[e("div",as,[rs,e("div",cs,[j.value.length>0?(a(!0),r(P,{key:0},T(j.value,(t,c)=>{var u,v,p,x,w,g;return a(),r("div",{key:c,draggable:!0,id:"accord_wish_"+t.agree_id,class:"select-none flex justify-between items-center elementDrag h-20 hover:cursor-move hover:opacity-80 transition-all duration-100 ease-in-out"},[e("div",ds,[e("span",vs,[e("span",{class:D(["fi text-xl xl:text-5xl transition-all duration-100 ease-in-out","fi-"+((u=t.partnercountry)==null?void 0:u.parco_code)])},null,2),(v=t.partnercountry)!=null&&v.parco_code?C("",!0):(a(),r("span",ps," ? "))]),e("p",_s,[_("("+i(((p=t.partnercountry)==null?void 0:p.parco_name)||"Pays indisponible")+") ",1),e("span",fs,i(((x=t.university)==null?void 0:x.univ_city)||"Ville indisponible")+" - "+i(((w=t.university)==null?void 0:w.univ_name)||"Université indisponible"),1),_(" ("+i(((g=t.isced)==null?void 0:g.isc_code)||"Code ISCED indisponible")+")",1)])])],8,us)}),128)):(a(),r("div",hs,xs))])]),e("div",ws,[gs,e("div",bs,[(a(),r(P,null,T(6,(t,c)=>{var u,v,p,x,w,g;return e("span",{class:"flex items-center min-h-20 w-full px-5 xl:px-10 transition-all duration-100 ease-in-out",key:c},[e("p",ys,"Vœu n°"+i(t),1),e("div",{id:"voeu"+t,class:"voeuxDrop bg-base-100 h-20 w-full flex items-center justify-center transition-all duration-100 ease-in-out"},[n.value[t]?(a(),r("div",{key:0,draggable:!0,id:"accord_wish_"+n.value[t].agree_id,class:"bg-base-300 select-none flex justify-between items-center elementDrag w-full transition-all duration-100 ease-in-out h-20 hover:cursor-move hover:opacity-80"},[e("div",{class:D([m.value.agreement&&m.value.agreement.agree_id==n.value[t].agree_id?"border-warning":"border-base-300","border-2 flex items-center justify-center h-20 select-none w-full"])},[e("span",js,[e("span",{class:D(["fi text-xl xl:text-5xl transition-all duration-100 ease-in-out","fi-"+((u=n.value[t].partnercountry)==null?void 0:u.parco_code)])},null,2),(v=n.value[t].partnercountry)!=null&&v.parco_code?C("",!0):(a(),r("span",Ds," ? "))]),e("p",Vs,[_("("+i(((p=n.value[t].partnercountry)==null?void 0:p.parco_name)||"Pays indisponible")+") ",1),e("span",Es,i(((x=n.value[t].university)==null?void 0:x.univ_city)||"Ville indisponible")+" - "+i(((w=n.value[t].university)==null?void 0:w.univ_name)||"Université indisponible"),1),_(" ("+i(((g=n.value[t].isced)==null?void 0:g.isc_code)||"Code ISCED indisponible")+")",1)])],2),e("button",{onClick:U=>le(n.value[t].agree_id,t),class:"h-20 bg-base-300 hover:opacity-60 p-5 hover:cursor-pointer"},Ls,8,Ms)],8,Cs)):(a(),r("p",$s,"Emplacement vœu n°"+i(t),1))],8,ks)])}),64))])])])]),e("div",Is,[e("p",null,"Vous avez "+i(j.value.length)+" favoris et "+i(Q())+" vœux",1),Ss,e("p",null,[_("Date limite avant la fermeture des vœux : "),e("span",zs,i(oe(M.value.adm_datelimite)),1),_(" ("+i(B(M.value.adm_datelimite))+" jour"+i(B(M.value.adm_datelimite)>1?"s":"")+" restant"+i(B(M.value.adm_datelimite)>1?"s":"")+")",1)]),L.value&&L.value.agreements?(a(),r("div",Ns,[Ps,e("div",null,[e("div",{class:"bg-base-300 p-2 mt-1 flex justify-between items-center hover:opacity-60 hover:cursor-pointer",onClick:s[15]||(s[15]=t=>re("favoris"))},[e("p",null,"Liste des accords ("+i(j.value.length)+")",1),e("span",{class:D([A.value.favoris?"rotate-180":"","transform transition-transform text-xl select-none"])},"▾",2)]),be(e("div",Ts,[e("div",Us,[j.value.length>0?(a(!0),r(P,{key:0},T(j.value,(t,c)=>{var u,v,p,x,w,g;return a(),r("div",{key:c,draggable:!0,id:"accord_wish_"+t.agree_id,class:"select-none flex justify-between items-center w-full h-20 hover:cursor-move hover:opacity-80 transition-all duration-100 ease-in-out"},[e("div",Fs,[e("span",Gs,[e("span",{class:D(["fi text-lg xl:text-5xl transition-all duration-100 ease-in-out","fi-"+(((u=t.partnercountry)==null?void 0:u.parco_code)||"")])},null,2),(v=t.partnercountry)!=null&&v.parco_code?C("",!0):(a(),r("span",Os," ? "))]),e("p",Hs,[_("("+i(((p=t.partnercountry)==null?void 0:p.parco_name)||"Pays indisponible")+") ",1),e("span",Zs,i(((x=t.university)==null?void 0:x.univ_city)||"Ville indisponible")+" - "+i(((w=t.university)==null?void 0:w.univ_name)||"Université indisponible"),1),_(" ("+i(((g=t.isced)==null?void 0:g.isc_code)||"Code ISCED indisponible")+")",1)])])],8,As)}),128)):(a(),r("div",Rs,Ws))])],512),[[ye,A.value.favoris]])])])):C("",!0),(a(),r(P,null,T(6,(t,c)=>{var u,v,p,x,w,g;return e("span",{class:"flex items-center min-h-20",key:c},[e("div",{id:"voeu"+t,class:"voeuxDrop bg-base-100 h-20 w-full flex items-center justify-center transition-all duration-100 ease-in-out"},[n.value[t]?(a(),r("div",{key:0,draggable:!0,id:"accord_wish_"+n.value[t].agree_id,class:"bg-base-300 select-none flex justify-between items-center elementDrag w-full transition-all duration-100 ease-in-out h-20 hover:cursor-move hover:opacity-80"},[e("div",{class:D(["border-2 bg-base-300 flex items-center justify-center h-20 select-none w-full",m.value.agreement&&m.value.agreement.agree_id==n.value[t].agree_id?"border-warning":"border-base-300"])},[e("span",Js,[e("span",{class:D(["fi text-xl xl:text-5xl transition-all duration-100 ease-in-out","fi-"+(((u=n.value[t].partnercountry)==null?void 0:u.parco_code)||"")])},null,2),(v=n.value[t].partnercountry)!=null&&v.parco_code?C("",!0):(a(),r("span",Qs," ? "))]),e("p",Xs,[_("("+i(((p=n.value[t].partnercountry)==null?void 0:p.parco_name)||"Pays indisponible")+") ",1),e("span",en,i(((x=n.value[t].university)==null?void 0:x.univ_city)||"Ville indisponible")+" - "+i(((w=n.value[t].university)==null?void 0:w.univ_name)||"Université indisponible"),1),_(" ("+i(((g=n.value[t].isced)==null?void 0:g.isc_code)||"Code ISCED indisponible")+")",1)])],2),e("button",{onClick:U=>le(n.value[t].agree_id,t),class:"h-20 bg-base-300 hover:opacity-60 p-5 hover:cursor-pointer"},nn,8,tn)],8,Ys)):(a(),r("label",{key:1,for:"modal_ajout_accord",onClick:U=>ce(t),class:"hover:opacity-80 select-none w-full flex flex-col items-center justify-center bg-base-300 p-2"},[e("p",on,"Emplacement vœu n°"+i(t),1),an],8,ln))],8,Ks)])}),64)),rn,e("div",cn,[e("div",un,[e("h3",dn,"Choisissez un accord pour le vœu n°"+i(S.value),1),j.value.length>0?(a(!0),r(P,{key:0},T(j.value,(t,c)=>{var u,v,p,x,w,g;return a(),r("div",{onClick:U=>ue(t.agree_id),key:c,draggable:!0,id:"accord_wish_"+t.agree_id,class:"my-1 select-none flex justify-between items-center w-full h-20 hover:cursor-move hover:opacity-80 transition-all duration-100 ease-in-out"},[e("div",pn,[e("span",_n,[e("span",{class:D(["fi text-xl xl:text-5xl transition-all duration-100 ease-in-out","fi-"+(((u=t.partnercountry)==null?void 0:u.parco_code)||"")])},null,2),(v=t.partnercountry)!=null&&v.parco_code?C("",!0):(a(),r("span",fn," ? "))]),e("p",hn,[_("("+i(((p=t.partnercountry)==null?void 0:p.parco_name)||"Pays indisponible")+") ",1),e("span",mn,i(((x=t.university)==null?void 0:x.univ_city)||"Ville indisponible")+" - "+i(((w=t.university)==null?void 0:w.univ_name)||"Université indisponible"),1),_(" ("+i(((g=t.isced)==null?void 0:g.isc_code)||"Code ISCED indisponible")+")",1)])])],8,vn)}),128)):(a(),r("div",xn,gn)),bn])])])])):(a(),r("div",yn,[e("div",kn,[Cn,jn,e("div",Dn,[(a(),r(P,null,T(6,(t,c)=>e("span",{class:"flex items-center min-h-20",key:c},[e("p",Vn,"Vœu n°"+i(t),1),e("div",En,[n.value[t]?(a(),r("div",Mn,[e("div",{class:D([m.value.agreement&&m.value.agreement.agree_id==n.value[t].agree_id?"border-warning":"border-base-300","border-2 bg-base-300 flex items-center justify-center h-20 select-none w-full"])},[e("span",{class:"tooltip mr-2","data-tip":n.value[t].partnercountry.parco_name},[e("span",{class:D(["fi xl:text-5xl text-xl transition-all duration-100 ease-in-out","fi-"+n.value[t].partnercountry.parco_code])},null,2)],8,Bn),e("p",Ln,[_("("+i(n.value[t].partnercountry.parco_name)+") ",1),e("span",$n,i(n.value[t].university.univ_city)+" - "+i(n.value[t].university.univ_name),1),_(" ("+i(n.value[t].isced.isc_code)+")",1)])],2)])):(a(),r("p",In,"Emplacement vœu n°"+i(t)+" vide",1))])])),64))])])]))])):(a(),r("div",Sn,[ie(ke)]))}}};export{Pn as default};
