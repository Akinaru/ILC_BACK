import{b as W,d as n,E as M,w as F,g as e,B as y,r as u,G as ee,l as te,H as q,o as se,c as x,e as l,f as C,y as d,q as Y,v as ne,F as H,t as j,J as le,h as S,i as Z,A as U,x as ae}from"./index-B86mjc3y.js";const oe={class:"font-bold md:text-xl text-xxxs flex items-center justify-center md:p-5 p-2"},ie={class:"flex flex-col w-5/6 items-start justify-center md:py-5 p-2"},ce={class:"flex md:items-center items-start justify-start w-full md:flex-row flex-col"},re={class:"badge badge-warning min-w-fit md:badge-md badge-xs md:text-md text-xxxs"},ue={class:"font-bold md:mx-3 md:text-base text-xxs"},de={class:"truncate overflow-hidden w-full whitespace-nowrap md:text-md text-xxs"},L={__name:"EventComp",props:{event:Object},setup(p){function v(c){if(!c)return"";const w={day:"2-digit",month:"2-digit",year:"numeric"};return new Date(c).toLocaleDateString("fr-FR",w)}return(c,w)=>{const f=W("RouterLink");return n(),M(f,{class:"hover:opacity-60 sm:w-4/5 w-full bg-base-300 my-2 flex overflow-hidden scale-100 hover:scale-105 transition-all",to:{name:"EvenementDetail",params:{evt_id:p.event.evt_id}}},{default:F(()=>[e("p",oe,y(v(p.event.evt_datetime)),1),e("div",ie,[e("div",ce,[e("span",re,y(p.event.theme.evthm_name),1),e("p",ue,y(p.event.evt_name),1)]),e("p",de,y(p.event.evt_description),1)])]),_:1},8,["to"])}}},ve={key:0},fe={class:"flex justify-between items-center"},me={class:"text-sm breadcrumbs font-bold"},_e={key:0},he={key:1},ye={key:2},pe={class:"flex justify-start items-end"},xe=e("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M7 10H9V12H7V10ZM11 10H13V12H11V10ZM15 10H17V12H15V10ZM7 14H9V16H7V14ZM11 14H13V16H11V14ZM15 14H17V16H15V14ZM19 3H18V1H16V3H8V1H6V3H5C3.9 3 3 3.9 3 5V21C3 22.1 3.9 23 5 23H19C20.1 23 21 22.1 21 21V5C21 3.9 20.1 3 19 3ZM19 21H5V8H19V21Z",fill:"currentColor"})],-1),we=[xe],ge=e("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M3 3H11V11H3V3ZM13 3H21V11H13V3ZM3 13H11V21H3V13ZM13 13H21V21H13V13Z",fill:"currentColor"})],-1),be=[ge],ke={key:0},Ve={key:0},De={class:"font-bold text-2xl py-10 flex items-center justify-center"},He={class:"w-full flex justify-center items-center flex-col"},je={class:"input input-bordered flex items-center gap-2 md:w-4/5 w-full"},Me=e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",class:"w-4 h-4 opacity-70"},[e("path",{"fill-rule":"evenodd",d:"M9.965 11.026a5 5 0 1 1 1.06-1.06l2.755 2.754a.75.75 0 1 1-1.06 1.06l-2.755-2.754ZM10.5 7a3.5 3.5 0 1 1-7 0 3.5 3.5 0 0 1 7 0Z","clip-rule":"evenodd"})],-1),Ee={class:"flex md:w-4/5 w-full flex-wrap justify-start pt-1"},$e=["id","value"],Ce=["for"],Se={class:"badge badge-warning min-w-fit md:badge-md badge-xs md:text-md text-xxs"},Ze={key:0},Le={key:0,class:"flex flex-col justify-center items-center py-10"},Fe=e("h2",{class:"font-bold text-xl"},"Événements passés",-1),Ne={class:"w-full flex flex-col justify-center items-center py-5"},Re={key:1,class:"flex flex-col justify-center items-center py-10"},Te=e("h2",{class:"font-bold text-xl"},"Événements passés",-1),Ae=e("p",{class:"py-10"},"Il n'y a aucun événement passé.",-1),Be=[Te,Ae],qe={key:2,class:"flex flex-col justify-center items-center py-10"},Ue=e("h2",{class:"font-bold text-lg"},"Événements d'aujourd'hui",-1),Ge={key:0,class:"w-full flex flex-col justify-center items-center py-5"},Je={key:1,class:"py-10"},Oe=e("p",null,"Il n'y a aucun événement aujourd'hui.",-1),Ie=[Oe],Pe={key:3,class:"flex flex-col justify-center items-center py-10"},Qe={key:0,class:"w-full flex flex-col justify-center items-center py-5"},Ye={key:1,class:"py-10"},We=e("p",null,"Aucun événement n'a été trouvé.",-1),ze=[We],Ke={key:4,class:"flex flex-col justify-center items-center py-10"},Xe=e("h2",{class:"font-bold text-xl"},"Événements à venir",-1),et={key:0,class:"w-full flex flex-col justify-center items-center py-5"},tt={key:1,class:"py-10"},st=e("p",null,"Il n'y a aucun événement à venir.",-1),nt=[st],lt={key:1,class:"flex items-center justify-center py-20"},at=e("p",null,"Aucun événement n'a été trouvé.",-1),ot=[at],it={key:2,class:"flex items-center justify-center p-10 w-full"},ct={key:1},rt=e("p",null,"La date passée en paramètre est incorrecte.",-1),ut=[rt],dt={key:1,class:"py-10 flex items-center justify-center flex-col"},vt=e("p",{class:"font-bold text-2xl py-10 flex items-center justify-center"},"Calendrier",-1),mt={__name:"evenementliste",setup(p){const v=u([]),c=u([]),w=ee();te();const f=u(!1),g=u(null),r=u("all"),b=u(!0),N=u(!1),R=u(!1),T=u([]),G=u(!1),k=u([]),V=u("");function m(t){if(!t)return"";const s={day:"2-digit",month:"2-digit",year:"numeric"};return new Date(t).toLocaleDateString("fr-FR",s)}function J(t){if(!(t instanceof Date))throw new Error("Le paramètre doit être une instance de Date.");const s=["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"],o=["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],a=s[t.getDay()],i=t.getDate().toString().padStart(2,"0"),D=o[t.getMonth()],X=t.getFullYear();return`${a} ${i} ${D} ${X}`}function E(t){G.value=t}function O(t){const[s,o,a]=t.split("/");return new Date(`${a}-${o}-${s}`)}function A(t){const s=new Date,o=String(s.getDate()).padStart(2,"0"),a=String(s.getMonth()+1).padStart(2,"0"),i=s.getFullYear(),D=`${o}/${a}/${i}`;return t===D}async function I(){f.value=!1,E(!1),await S("GET",!1,v,Z.apiUrl+"api/event"),await S("GET",!1,T,Z.apiUrl+"api/eventtheme"),c.value=v.value.events,f.value=!0,B()}async function P(t){f.value=!1,E(!1),await S("GET",!1,v,Z.apiUrl+"api/event"),await S("GET",!1,T,Z.apiUrl+"api/eventtheme");const s=m(t);c.value=v.value.events.filter(o=>m(o.evt_datetime)===s),f.value=!0}q(()=>w.query,async(t,s)=>{const{date:o}=t;if(o){const a=O(o);if(isNaN(a)){b.value=!1;return}g.value=a,r.value="day",await P(a)}else r.value="all",await I();b.value=!0}),se(async()=>{const{date:t}=w.query;if(t){const s=O(t);if(isNaN(s)){b.value=!1;return}g.value=s,r.value="day",await P(s)}else r.value="all",await I();b.value=!0});function B(){c.value=v.value.events.filter(t=>{const s=new RegExp(V.value,"i"),o=V.value?s.test(t.evt_name)||s.test(t.evt_description):!0,a=k.value.length===0||k.value.includes(t.theme.evthm_id);return o&&a})}q(k,B),q(V,B);const _=x(()=>c.value?c.value.filter(t=>new Date(t.evt_datetime)<new Date&&!A(m(t.evt_datetime))):[]),$=x(()=>c.value?c.value.filter(t=>A(m(t.evt_datetime))):[]),h=x(()=>c.value?c.value.filter(t=>new Date(t.evt_datetime)>new Date):[]),z=x(()=>(N.value?_.value:_.value.slice(0,2)).filter(s=>!A(m(s.evt_datetime)))),K=x(()=>R.value?h.value:h.value.slice(0,2)),Q=x(()=>c.value.filter(t=>m(t.evt_datetime)===m(g.value)));return(t,s)=>{const o=W("RouterLink");return f.value?(n(),l("div",ve,[e("div",fe,[e("div",me,[e("ul",null,[e("li",null,[C(o,{to:{name:"Accueil"}},{default:F(()=>[U("Accueil")]),_:1})]),r.value=="all"?(n(),l("li",_e,"Événements")):(n(),l("li",he,[C(o,{to:{name:"Evenement"}},{default:F(()=>[U("Événements")]),_:1})])),r.value!="all"?(n(),l("li",ye,y(J(g.value)),1)):d("",!0)])]),e("div",pe,[e("button",{class:"hover:opacity-70 transition-all btn btn-primary mx-1 hover:scale-105",onClick:s[0]||(s[0]=a=>E(!0))},we),e("button",{class:"hover:opacity-70 transition-all btn btn-primary hover:scale-105",onClick:s[1]||(s[1]=a=>E(!1))},be)])]),G.value?(n(),l("div",dt,[vt,C(le,{events:v.value},null,8,["events"])])):(n(),l("div",ke,[b.value?(n(),l("div",Ve,[e("p",De,y(r.value==="all"?"Liste des Événements":"Événements du "+J(g.value)),1),e("div",He,[e("label",je,[Y(e("input",{type:"text",class:"grow",placeholder:"Rechercher","onUpdate:modelValue":s[2]||(s[2]=a=>V.value=a)},null,512),[[ne,V.value]]),Me]),e("div",Ee,[(n(!0),l(H,null,j(T.value,(a,i)=>(n(),l("div",{key:i,class:"flex items-center justify-center py-1 min-w-fit"},[Y(e("input",{id:"filt_them_"+i,type:"checkbox",class:"checkbox",value:a.evthm_id,"onUpdate:modelValue":s[3]||(s[3]=D=>k.value=D)},null,8,$e),[[ae,k.value]]),e("label",{for:"filt_them_"+i,class:"select-none w-full mx-2"},[e("span",Se,y(a.evthm_name),1)],8,Ce)]))),128))])]),_.value&&_.value.length>0||$.value&&$.value.length>0||h.value&&h.value.length>0?(n(),l("div",Ze,[_.value.length>0&&r.value!=="day"?(n(),l("div",Le,[Fe,e("div",Ne,[(n(!0),l(H,null,j(z.value,(a,i)=>(n(),M(L,{class:"opacity-50",key:i,event:a},null,8,["event"]))),128)),!N.value&&_.value.length>2?(n(),l("button",{key:0,onClick:s[4]||(s[4]=a=>N.value=!0),class:"btn btn-primary mt-2 hover:scale-105 transition-all"},"Voir plus d'événements passés")):d("",!0)])])):_.value.length===0&&r.value==="all"?(n(),l("div",Re,Be)):d("",!0),r.value==="all"?(n(),l("div",qe,[Ue,$.value.length>0?(n(),l("div",Ge,[(n(!0),l(H,null,j($.value,(a,i)=>(n(),M(L,{class:"md:scale-110 md:hover:scale-115",key:i,event:a},null,8,["event"]))),128))])):r.value==="all"?(n(),l("div",Je,Ie)):d("",!0)])):d("",!0),r.value==="day"?(n(),l("div",Pe,[Q.value.length>0?(n(),l("div",Qe,[(n(!0),l(H,null,j(Q.value,(a,i)=>(n(),M(L,{key:i,event:a},null,8,["event"]))),128))])):(n(),l("div",Ye,ze))])):d("",!0),r.value!=="day"?(n(),l("div",Ke,[Xe,h.value&&h.value.length?(n(),l("div",et,[(n(!0),l(H,null,j(K.value,(a,i)=>(n(),M(L,{key:i,event:a},null,8,["event"]))),128)),h.value.length>2&&!R.value?(n(),l("button",{key:0,onClick:s[5]||(s[5]=a=>R.value=!0),class:"btn btn-primary mt-2 hover:scale-105 transition-all"},"Voir plus d'événements à venir")):d("",!0)])):(n(),l("div",tt,nt))])):d("",!0)])):(n(),l("div",lt,ot)),r.value!="all"?(n(),l("div",it,[C(o,{to:{name:"Evenement"},class:"hover:opacity-70 btn btn-primary w-72 md:w-100 hover:scale-105 transition-all"},{default:F(()=>[U("Voir tous les Événements")]),_:1})])):d("",!0)])):(n(),l("div",ct,ut))]))])):d("",!0)}}};export{mt as default};
