import{k as K,G as Q,r as m,o as X,b as Y,d as l,e as n,g as e,f as V,w as N,B as c,A as w,C as q,y as E,F as $,t as R,z as Z,q as U,v as A,s as ee,u as F,h as f,i as v,I as S}from"./index-WfzvT7mn.js";const te={class:"text-sm breadcrumbs font-bold"},se={key:0},oe={key:1},le={key:0},ne={class:"text-xl font-bold py-5 bg-base-200 flex items-center justify-center"},ae={key:0},ie=e("p",{class:"font-bold text-xl py-5"},"Destination finale",-1),ce={class:"select-none flex justify-between items-center elementDrag h-20 transition-all duration-100 ease-in-out"},re={class:"border-warning border-2 bg-base-300 p-1 flex items-center justify-center w-full h-20 select-none"},de=["data-tip"],ue={key:0,class:"absolute inset-0 flex items-center justify-center text-black text-2xl font-bold bg-white select-none"},_e={class:"w-full select-none"},pe={class:"font-bold"},ve={class:"flex md:flex-row flex-col justify-between w-full pt-5"},he={class:"w-fit"},fe=e("p",{class:"font-bold text-xl py-5"},"Liste des voeux:",-1),me={class:"font-bold text-sm xl:text-lg min-w-fit p-5 transition-all duration-100 ease-in-out"},be={key:0,class:"select-none flex justify-between items-center elementDrag w-96 h-20"},we={class:"flex items-center justify-center h-20 select-none"},xe={class:"relative inline-block mr-2"},ke={key:0,class:"absolute inset-0 flex items-center justify-center text-black text-2xl font-bold bg-white select-none"},ge={class:"w-full select-none"},ye={class:"font-bold"},Ce={key:1,class:"w-96 flex items-center justify-center"},Me=e("p",{class:"select-none"},"Pas de voeu séléctionné",-1),je=[Me],De={class:"w-full flex items-center justify-center flex-col"},Ee={class:"w-3/5 flex items-center justify-center flex-col"},Ue=e("p",{class:"font-bold text-xl py-5 w-full"},"Informations:",-1),ze={class:"form-control w-full"},Be=e("div",{class:"label"},[e("span",{class:"label-text"},"Identitée")],-1),Te=["value"],Ve={class:"form-control w-full"},Ne=e("div",{class:"label"},[e("span",{class:"label-text"},"Email")],-1),$e=["value"],Ae={class:"form-control w-full"},Se=e("div",{class:"label"},[e("span",{class:"label-text"},"Numéro étudiant")],-1),Ge=["value"],Ie={class:"form-control w-full"},Pe=e("div",{class:"label"},[e("span",{class:"label-text"},"Département")],-1),Le=["value"],qe={class:"form-control w-full"},Re=e("div",{class:"label"},[e("span",{class:"label-text"},"Score TOEIC")],-1),Fe=["value"],He=e("svg",{class:"h-5 w-5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M20,16v4a2,2,0,0,1-2,2H4a2,2,0,0,1-2-2V6A2,2,0,0,1,4,4H8",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"}),e("polygon",{fill:"none",points:"12.5 15.8 22 6.2 17.8 2 8.3 11.5 8 16 12.5 15.8",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"})],-1),Oe=e("p",null,"Modifier",-1),We=[He,Oe],Je=e("input",{type:"checkbox",id:"my_modal_6",class:"modal-toggle"},null,-1),Ke={class:"modal",role:"dialog"},Qe={class:"modal-box"},Xe=e("h3",{class:"text-lg font-bold"},"Modification des informations",-1),Ye={class:"form-control w-full"},Ze=e("div",{class:"label"},[e("span",{class:"label-text"},"Mail")],-1),et={class:"form-control w-full"},tt=e("div",{class:"label"},[e("span",{class:"label-text"},"Numéro étudiant")],-1),st={class:"form-control w-full"},ot=e("div",{class:"label"},[e("span",{class:"label-text"},"Département")],-1),lt=["disabled"],nt=e("option",{value:"no_dept"},"Aucun département",-1),at=["value"],it={key:0},ct={class:"form-control w-full"},rt=e("div",{class:"label"},[e("span",{class:"label-text"},"Toeic")],-1),dt=e("div",{class:"modal-action"},[e("button",{type:"submit"},[e("label",{for:"my_modal_6",class:"btn btn-success"},"Enregistrer")]),e("label",{for:"my_modal_6",class:"btn"},"Annuler")],-1),ut={class:"w-full flex items-center justify-center flex-col"},_t={class:"w-1/2"},pt=e("p",{class:"text-xl font-bold w-full"},"Documents",-1),vt={class:"form-control w-full py-3"},ht=e("div",{class:"label"},[e("span",{class:"label-text"},"Choix de cours")],-1),ft={key:0,class:"w-full flex flex-col"},mt=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-warning",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.458 12C3.732 7.943 7.522 5 12 5c4.478 0 8.268 2.943 9.542 7-.02.079-.046.155-.07.232C20.268 16.057 16.478 19 12 19c-4.478 0-8.268-2.943-9.542-7 .024-.077.05-.153.07-.232z"})],-1),bt=e("span",{class:"text-warning"},"Voir votre fichier",-1),wt=[mt,bt],xt=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-error",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1),kt=e("span",{class:"text-error"},"Supprimer le fichier",-1),gt=[xt,kt],yt={key:1,class:"btn btn-neutral mb-1",disabled:""},Ct=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.458 12C3.732 7.943 7.522 5 12 5c4.478 0 8.268 2.943 9.542 7-.02.079-.046.155-.07.232C20.268 16.057 16.478 19 12 19c-4.478 0-8.268-2.943-9.542-7 .024-.077.05-.153.07-.232z"})],-1),Mt=e("span",null,"Aucun fichier",-1),jt=[Ct,Mt],Dt={class:"form-control w-full py-3"},Et=e("div",{class:"label"},[e("span",{class:"label-text"},"Contrat pédagogique")],-1),Ut={key:0,class:"w-full flex flex-col"},zt=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-warning",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.458 12C3.732 7.943 7.522 5 12 5c4.478 0 8.268 2.943 9.542 7-.02.079-.046.155-.07.232C20.268 16.057 16.478 19 12 19c-4.478 0-8.268-2.943-9.542-7 .024-.077.05-.153.07-.232z"})],-1),Bt=e("span",{class:"text-warning"},"Voir votre fichier",-1),Tt=[zt,Bt],Vt=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-error",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1),Nt=e("span",{class:"text-error"},"Supprimer le fichier",-1),$t=[Vt,Nt],At={key:1,class:"btn btn-neutral mb-1",disabled:""},St=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.458 12C3.732 7.943 7.522 5 12 5c4.478 0 8.268 2.943 9.542 7-.02.079-.046.155-.07.232C20.268 16.057 16.478 19 12 19c-4.478 0-8.268-2.943-9.542-7 .024-.077.05-.153.07-.232z"})],-1),Gt=e("span",null,"Aucun fichier",-1),It=[St,Gt],Pt={class:"form-control w-full py-3"},Lt=e("div",{class:"label"},[e("span",{class:"label-text"},"Relevé des notes")],-1),qt={key:0,class:"w-full flex flex-col"},Rt=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-warning",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.458 12C3.732 7.943 7.522 5 12 5c4.478 0 8.268 2.943 9.542 7-.02.079-.046.155-.07.232C20.268 16.057 16.478 19 12 19c-4.478 0-8.268-2.943-9.542-7 .024-.077.05-.153.07-.232z"})],-1),Ft=e("span",{class:"text-warning"},"Voir votre fichier",-1),Ht=[Rt,Ft],Ot=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-error",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1),Wt=e("span",{class:"text-error"},"Supprimer le fichier",-1),Jt=[Ot,Wt],Kt={key:1,class:"btn btn-neutral mb-1",disabled:""},Qt=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.458 12C3.732 7.943 7.522 5 12 5c4.478 0 8.268 2.943 9.542 7-.02.079-.046.155-.07.232C20.268 16.057 16.478 19 12 19c-4.478 0-8.268-2.943-9.542-7 .024-.077.05-.153.07-.232z"})],-1),Xt=e("span",null,"Aucun fichier",-1),Yt=[Qt,Xt],Zt={id:"confirmModalDoc",ref:"confirmModalDoc",class:"modal"},es={class:"modal-box"},ts=e("h3",{class:"text-lg font-bold"},"Confirmer la suppression ?",-1),ss={class:"py-3"},os={class:"modal-action"},ls={key:1},ns=e("p",{class:"flex font-bold items-center justify-center p-52"},"Étudiant introuvable...",-1),as=[ns],ds={__name:"profile",setup(is){const G=K(),x=Q().params.acc_id,o=m([]),I=m([]),r=m([]),d=m([]),u=m([]),H=m(["agree_one","agree_two","agree_three","agree_four","agree_five","agree_six"]),i=m({choixCours:{exist:!1,path:""},contratPeda:{exist:!1,path:""},releveNote:{exist:!1,path:""}}),k=m({folder:"",title:"",type:""}),a=m([]);async function O(){await f("GET",!1,o,v.apiUrl+"api/account/getbylogin/"+x),T(),await f("GET",!1,r,v.apiUrl+"api/wishagreement/getbylogin/"+x),await f("GET",!1,u,v.apiUrl+"api/arbitrage/getbyid/"+o.value.acc_id),await f("GET",!1,I,v.apiUrl+"api/department"),await f("GET",!1,d,v.apiUrl+"api/documents/checkexistperso/etu/choix_cours/"+x),d.value.status==200&&(i.value.choixCours.exist=!0,i.value.choixCours.path=d.value.path),await f("GET",!1,d,v.apiUrl+"api/documents/checkexistperso/etu/contrat_peda/"+x),d.value.status==200&&(i.value.contratPeda.exist=!0,i.value.contratPeda.path=d.value.path),await f("GET",!1,d,v.apiUrl+"api/documents/checkexistperso/etu/releve_note/"+x),d.value.status==200&&(i.value.releveNote.exist=!0,i.value.releveNote.path=d.value.path)}function z(h,s,_){k.value.folder=h,k.value.title=s,k.value.type=_,document.getElementById("confirmModalDoc").showModal()}function P(){document.getElementById("confirmModalDoc").close()}async function W(h,s,_){P(),await f("GET",!0,d,`${v.apiUrl}api/documents/deleteperso/${h}/${h}_${x}`),d.value.status==200&&(i.value[s].exist=!1,i.value[s].path="")}async function B(h){const s=h.split("/"),_=s[s.length-1],t=s[2];_.split("_")[2].split(".")[0];const b=`${v.apiUrl}api/documents/getperso/etu/${t}/${_}`;if(_.toLowerCase().endsWith(".pdf"))window.open(b,"_blank");else{const p=document.createElement("a");p.href=b,p.download=_,document.body.appendChild(p),p.click(),document.body.removeChild(p)}}async function J(){const h={acc_id:o.value.acc_id,acc_studentnum:a.value.acc_studentnum!=null?a.value.acc_studentnum:0,dept_id:a.value.dept_id!="no_dept"?a.value.dept_id:null,acc_mail:a.value.acc_mail!=null?a.value.acc_mail:"Aucun mail",acc_toeic:a.value.acc_toeic!=null?a.value.acc_toeic:0};await f("PUT",!0,d,v.apiUrl+"api/account/modif",h),await f("GET",!1,o,v.apiUrl+"api/account/getbylogin/"+x),T()}function T(){a.value.acc_studentnum=o.value.acc_studentnum,a.value.acc_mail=o.value.acc_mail,a.value.acc_toeic=o.value.acc_toeic,a.value.dept_id=o.value.department?o.value.department.dept_id:"no_dept"}return X(O),(h,s)=>{const _=Y("RouterLink");return l(),n($,null,[e("div",te,[e("ul",null,[e("li",null,[V(_,{to:{name:"Dashboard"}},{default:N(()=>[w("Dashboard")]),_:1})]),e("li",null,[V(_,{to:{name:"EtudiantsDash"}},{default:N(()=>[w("Étudiants")]),_:1})]),o.value&&o.value.acc_id?(l(),n("li",se,c(o.value.acc_fullname),1)):(l(),n("li",oe,"?"))])]),o.value&&o.value.acc_id?(l(),n("div",le,[e("p",ne,[w(c(o.value.acc_fullname),1),o.value.department!=null?(l(),n("span",{key:0,style:q({backgroundColor:o.value.department.dept_color}),class:"p-3 mx-3"},c(o.value.department.dept_shortname),5)):E("",!0)]),e("div",null,[u.value.agreement?(l(),n("div",ae,[ie,e("div",ce,[V(_,{to:{name:"Accord",params:{agree_id:u.value.agreement.agree_id}},class:"group hover:opacity-60 relative"},{default:N(()=>{var t,b,p,g,y,C,M,j,D,L;return[e("div",re,[e("span",{class:"relative inline-block tooltip mr-2","data-tip":((b=(t=u.value.agreement)==null?void 0:t.partnercountry)==null?void 0:b.parco_name)||"Introuvable"},[e("span",{class:S(["fi xl:text-5xl text-xl transition-all duration-100 ease-in-out","fi-"+(((g=(p=u.value.agreement)==null?void 0:p.partnercountry)==null?void 0:g.parco_code)||"")])},null,2),(C=(y=u.value.agreement)==null?void 0:y.partnercountry)!=null&&C.parco_code?E("",!0):(l(),n("span",ue," ? "))],8,de),e("p",_e,[w("("+c(((M=u.value.agreement.partnercountry)==null?void 0:M.parco_name)||"Pays indisponible")+") ",1),e("span",pe,c(((j=u.value.agreement.university)==null?void 0:j.univ_city)||"Ville indisponible")+" - "+c(((D=u.value.agreement.university)==null?void 0:D.univ_name)||"Université indisponible"),1),w(" ("+c(((L=u.value.agreement.isced)==null?void 0:L.isc_code)||"Code ISCED indisponible")+")",1)])])]}),_:1},8,["to"])])])):E("",!0),e("div",ve,[e("div",he,[fe,(l(!0),n($,null,R(H.value,(t,b)=>{var p,g,y,C,M,j,D;return l(),n("div",{key:b},[e("div",{class:S(["w-fit flex items-center justify-start my-1 bg-base-300 border-2",u.value.agreement&&((p=r.value)==null?void 0:p.count)>0&&r.value.wishes[t]&&u.value.agreement.agree_id==r.value.wishes[t].agree_id?" border-warning":"border-base-300"])},[e("p",me,"Voeu n° "+c(b+1),1),r.value&&r.value.count>0&&r.value.wishes[t]?(l(),n("div",be,[e("div",we,[e("span",xe,[e("span",{class:S(["fi text-xl xl:text-5xl transition-all duration-100 ease-in-out","fi-"+((g=r.value.wishes[t].partnercountry)==null?void 0:g.parco_code)])},null,2),(y=r.value.wishes[t].partnercountry)!=null&&y.parco_code?E("",!0):(l(),n("span",ke," ? "))]),e("p",ge,[w("("+c(((C=r.value.wishes[t].partnercountry)==null?void 0:C.parco_name)||"Pays indisponible")+") ",1),e("span",ye,c(((M=r.value.wishes[t].university)==null?void 0:M.univ_city)||"Ville indisponible")+" - "+c(((j=r.value.wishes[t].university)==null?void 0:j.univ_name)||"Université indisponible"),1),w(" ("+c(((D=r.value.wishes[t].isced)==null?void 0:D.isc_code)||"Code ISCED indisponible")+")",1)])])])):(l(),n("div",Ce,je))],2)])}),128))]),e("div",De,[e("div",Ee,[Ue,e("label",ze,[Be,e("input",{type:"text",value:o.value.acc_fullname,class:"input input-bordered w-full",disabled:""},null,8,Te)]),e("label",Ve,[Ne,e("input",{type:"text",value:o.value.acc_mail,class:"input input-bordered w-full",disabled:""},null,8,$e)]),e("label",Ae,[Se,e("input",{type:"text",value:o.value.acc_studentnum,class:"input input-bordered w-full",disabled:""},null,8,Ge)]),e("label",Ie,[Pe,e("input",{type:"text",value:o.value.department?o.value.department.dept_shortname:"Aucun",class:"input input-bordered w-full",disabled:""},null,8,Le)]),e("label",qe,[Re,e("input",{type:"text",value:o.value.acc_toeic,class:"input input-bordered w-full",disabled:""},null,8,Fe)]),e("label",{for:"my_modal_6",class:"btn btn-primary w-full max-w-sm my-10",onClick:T},We),Je,e("div",Ke,[e("div",Qe,[Xe,e("form",{onSubmit:Z(J,["prevent"]),class:"w-full"},[e("label",Ye,[Ze,U(e("input",{type:"text",class:"input input-bordered w-full","onUpdate:modelValue":s[0]||(s[0]=t=>a.value.acc_mail=t)},null,512),[[A,a.value.acc_mail]])]),e("label",et,[tt,U(e("input",{type:"text",class:"input input-bordered w-full","onUpdate:modelValue":s[1]||(s[1]=t=>a.value.acc_studentnum=t)},null,512),[[A,a.value.acc_studentnum]])]),e("label",st,[ot,U(e("select",{disabled:F(G).access!==1,class:"select select-bordered w-full","onUpdate:modelValue":s[2]||(s[2]=t=>a.value.dept_id=t)},[nt,(l(!0),n($,null,R(I.value.departments,t=>(l(),n("option",{key:t.dept_id,value:t.dept_id,style:q({color:t.dept_color})},c(t.dept_shortname),13,at))),128))],8,lt),[[ee,a.value.dept_id]]),F(G).access!=1?(l(),n("p",it,"Seul les administrateurs peuvent modifier ce champ.")):E("",!0)]),e("label",ct,[rt,U(e("input",{type:"text",class:"input input-bordered w-full","onUpdate:modelValue":s[3]||(s[3]=t=>a.value.acc_toeic=t)},null,512),[[A,a.value.acc_toeic]])]),dt],32)])])])])]),e("div",ut,[e("div",_t,[pt,e("div",vt,[ht,i.value.choixCours.exist?(l(),n("div",ft,[e("button",{class:"btn btn-neutral mb-1",onClick:s[4]||(s[4]=t=>B(i.value.choixCours.path))},wt),e("button",{class:"btn btn-neutral mb-1",onClick:s[5]||(s[5]=t=>z("choix_cours","choixCours"))},gt)])):(l(),n("button",yt,jt))]),e("div",Dt,[Et,i.value.contratPeda.exist?(l(),n("div",Ut,[e("button",{class:"btn btn-neutral mb-1",onClick:s[6]||(s[6]=t=>B(i.value.contratPeda.path))},Tt),e("button",{class:"btn btn-neutral mb-1",onClick:s[7]||(s[7]=t=>z("contrat_peda","contratPeda"))},$t)])):(l(),n("button",At,It))]),e("div",Pt,[Lt,i.value.releveNote.exist?(l(),n("div",qt,[e("button",{class:"btn btn-neutral mb-1",onClick:s[8]||(s[8]=t=>B(i.value.releveNote.path))},Ht),e("button",{class:"btn btn-neutral mb-1",onClick:s[9]||(s[9]=t=>z("releve_note","releveNote"))},Jt)])):(l(),n("button",Kt,Yt))])]),e("dialog",Zt,[e("div",es,[ts,e("div",ss,[e("p",null,[w("Confirmez vous la suppression du fichier: "),e("strong",null,c(k.value.title),1)])]),e("div",os,[e("button",{class:"btn btn-error",onClick:P},"Annuler"),e("button",{class:"btn btn-success",onClick:s[10]||(s[10]=t=>W(k.value.folder,k.value.title,k.value.type))},"Confirmer")])])],512)])])])):(l(),n("div",ls,as))],64)}}};export{ds as default};
